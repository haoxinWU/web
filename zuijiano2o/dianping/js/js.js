/* Dynamic Combo */
!function(){var n="app-m-freshman@0.2.1/js/bonus.js",e="app-m-freshman@0.2.1/js/login.js",a="app-m-freshman@0.2.1/js/show-gift.js",i="zepto@^1.2.2",s=[n,e,a],t={},o=t;define(a,[i],function(n,e,a,i,s){var t=n("zepto");e.init=function(){t(function(){var n=navigator.userAgent.toLowerCase();n.match("micromessenger")||(t(document.body).append('<a class="gift" href="/gift/userGift"></a>'),t(".gift").on("click",function(){_hip.push(["mv",{module:"package",action:"click"}])}))})}},{entries:s,map:o})}();
//# sourceMappingURL=js/show-gift.js.map

!function(){function a(a,i){for(var e in i)a[e]=i[e];return a}var i="iscroll@~5.0.9",e="list-nav@~1.0.0",n="zepto@^1.2.1",r="cookie@~0.1.0",o="mobile-common@~0.2.9",t="huatuo@^1.0.6",d="base-op-url@^1.1.3",s="whereami@~0.2.1",c="app-m-dianping-list@1.3.22/js/dynamic_load.js",p="app-m-dianping-list@1.3.22/js/loadmore.js",l="wepp-module-toast@~0.3.0",v="app-m-dianping-list@1.3.22/index.js",u=[i],f={iscroll:i},m=f;define(v,[e,n,r,o,t,d,s,c],function(a,i,e,n,r){function o(a,i){var e=T('<nav class="list-nav "></nav>');y.after(e);var n,r=(T('<div class="cat Fix"> <a href="javascript:void(0)" class="item J_trigger">'+i.nav1+'<i class="drop"></i></a> <a href="javascript:void(0)" class="item J_trigger">'+i.nav2+' <i class="drop"></i> </a> <a href="javascript:void(0)" class="item J_trigger">'+i.nav3+' <i class="drop"></i> </a> </div>').appendTo(e),T('<section class="selector J_selector Hide"></section>').appendTo(e)),o=T('<div class="second-selector Hide" data-name="商区"></div>').appendTo(r),t=T('<div class="menu main"><div></div></div>').appendTo(o),d=t.find("div"),s=!1;i.diffcity||a.rangeNavs&&a.rangeNavs.length&&(a.currentRange?(n=T('<div> <p class="item Fix on">附近</p> <div class="menu sub"><div></div></div></div>').appendTo(d).find(".sub div"),a.rangeNavs.forEach(function(e){var r;a.currentRange.id==e.id?(s=!0,r=T('<a class="item Fix on" href="" >'+e.name+"</a> ").appendTo(n)):r=T('<a class="item Fix " href="" >'+e.name+"</a> ").appendTo(n),r.on("click",function(a){a.preventDefault(),B=!1,h&&(O=!0),T(".load-wrap").remove(),v(),c(),T(".loading_pic").show(),C=!1,D++;e.name.indexOf("附近")>-1?"附近":e.name;if(g="&range="+e.id,history.pushState){var n={start:0,categoryid:i.categoryid,sortid:i.sortid,pos:!0,range:e.id,keyword:i.keyword,diffcity:i.diffcity},r=u(n);T(window).unbind("scroll"),p(r,n);var o=location.href.replace(/(\/d\/\d*)|(\/r\/\d*)/,"/d/"+("-1"==e.id?1:e.id));history.pushState({url:r,params:n},"",o)}})})):(n=T('<div> <p class="item Fix">附近</p> <div class="menu sub Hide"><div></div></div></div>').appendTo(d).find(".sub div"),a.rangeNavs.forEach(function(a){var e=T('<a class="item Fix " href="" >'+a.name+"</a> ").appendTo(n);e.on("click",function(e){e.preventDefault(),B=!1,h&&(O=!0),T(".load-wrap").remove(),v(),c(),T(".loading_pic").show(),C=!1,D++;var n=a.name.indexOf("附近")>-1?"附近":a.name;if(g="&range="+a.id,history.pushState){var r={start:0,categoryid:i.categoryid,sortid:i.sortid,pos:!0,range:a.id,nav1:n,nav2:i.nav2,nav3:i.nav3,keyword:i.keyword,diffcity:i.diffcity},o=u(r);T(window).unbind("scroll"),p(o,r);var t=location.href.replace(/(\/d\/\d*)|(\/r\/\d*)/,"/d/"+("-1"==a.id?1:a.id));history.pushState({url:o,params:r},"",t)}})})));var l;if(a.currentRegion&&(l=a.currentRegion.id),"undefined"!=typeof l){var f=!1;a.regionNavs.forEach(function(a){if(0==a.parentId)n=T('<div> <p class="item Fix">'+a.name+'</p> <div class="menu sub Hide"><div></div></div></div>').appendTo(d).find(".sub div");else{var e;a.id!=l||f?e=T('<a class="item Fix" href="" >'+a.name+"</a> ").appendTo(n):(e=T('<a class="item Fix on" href="" >'+a.name+"</a> ").appendTo(n),n.parent().parent().find("p.item").addClass("on"),n.parent().parent().find(".sub").removeClass("Hide"),f=!0,s=!0),e.on("click",function(e){if(e.preventDefault(),B=!1,h&&(O=!0),T(".load-wrap").remove(),v(),c(),T(".loading_pic").show(),C=!1,D++,g="&regionid="+a.id,history.pushState){var n={start:0,categoryid:i.categoryid,sortid:i.sortid,pos:!1,regionid:a.id,nav1:a.name,nav2:i.nav2,nav3:i.nav3,keyword:i.keyword,diffcity:i.diffcity},r=u(n);T(window).unbind("scroll"),p(r,n);var o=location.href.replace(/(\/d\/\d*)|(\/r\/\d*)/,"/r/"+a.id);history.pushState({url:r,params:n},"",o)}})}})}else a.regionNavs.forEach(function(a){if(0==a.parentId)n=T('<div> <p class="item Fix">'+a.name+'</p> <div class="menu sub Hide"><div></div></div></div>').appendTo(d).find(".sub div");else{var e=T('<a class="item Fix" href="" >'+a.name+"</a> ").appendTo(n);e.on("click",function(e){if(e.preventDefault(),B=!1,h&&(O=!0),T(".load-wrap").remove(),v(),c(),T(".loading_pic").show(),C=!1,D++,g="&regionid="+a.id,history.pushState){var n={start:0,categoryid:i.categoryid,sortid:i.sortid,pos:!1,regionid:a.id,nav1:a.name,nav2:i.nav2,nav3:i.nav3,keyword:i.keyword,diffcity:i.diffcity},r=u(n);T(window).unbind("scroll"),p(r,n);var o=location.href.replace(/(\/d\/\d*)|(\/r\/\d*)/,"/r/"+a.id);history.pushState({url:r,params:n},"",o)}})}});if(a.metroNavs.length){var m=!1,k=T('<div class="second-selector Hide" data-name="地铁"></div>').appendTo(r),b=T('<div class="menu main"><div></div></div>').appendTo(k),I=b.find("div");a.metroNavs.forEach(function(a){if(0==a.parentId)n=T('<div> <p class="item Fix">'+a.name+'</p> <div class="menu sub Hide"><div></div></div></div>').appendTo(I).find(".sub div");else{var e;x("curMetroId")&&C&&a.parentId==x("curMetroParentId")?(m=!0,n.parent().parent().find("p.item").addClass("on"),n.parent().parent().find(".sub").removeClass("Hide"),e=a.id==x("curMetroId")?T('<a class="item Fix on" href="" >'+a.name+"</a> ").appendTo(n):T('<a class="item Fix" href="" >'+a.name+"</a> ").appendTo(n)):e=T('<a class="item Fix" href="" >'+a.name+"</a> ").appendTo(n),e.on("click",function(e){e.preventDefault(),B=!1,h&&(O=!0),T(".load-wrap").remove(),v(),c(),T(".loading_pic").show(),C=!0,D++,g="&regionid="+a.id;var n={start:0,categoryid:i.categoryid,sortid:i.sortid,pos:!1,regionid:a.id,nav1:a.name,nav2:i.nav2,nav3:i.nav3,keyword:i.keyword,diffcity:i.diffcity};x("curMetroId",a.id),x("curMetroParentId",a.parentId);var r=u(n);T(window).unbind("scroll"),p(r,n);var o=location.href.replace(/(\/d\/\d*)|(\/r\/\d*)/,"/r/"+a.id);history.pushState({url:r,params:n},"",o)})}}),!m&&D>0&&!s&&(T(".J_selector").first().find(".second-selector").last().find(".main .item").first().addClass("on"),T(".J_selector").first().find(".second-selector").last().find(".sub").first().removeClass("Hide"))}var n,q=T('<section class="selector J_selector Hide"> <div class="menu main"> <div></div></div></section>').appendTo(e).find(".main div"),j=a.currentCategory?a.currentCategory.id:0,F=!1;"true"==P.issqt&&10==P.sqttype?a.categoryNavs.forEach(function(a){if(0==a.parentId&&10==a.id)n=T('<div> <p class="item Fix on"><span class="ca ca_'+a.id+'"></span>'+a.name+'</p> <div class="menu sub"><div></div></div></div>').appendTo(q).find(".sub div");else if(10==a.parentId){var e;a.id!=j||F?e=T('<a class="item Fix" href="" >'+a.name+"</a> ").appendTo(n):(e=T('<a class="item Fix on" href="" >'+a.name+"</a> ").appendTo(n),n.parent().parent().find("p.item").addClass("on"),n.parent().parent().find(".sub").removeClass("Hide"),F=!0),e.on("click",function(e){if(e.preventDefault(),B=!1,h&&h.abort(),T(".load-wrap").remove(),v(),c(),T(".loading_pic").show(),w="&categoryid="+a.id,history.pushState){var n={start:0,categoryid:a.id,sortid:i.sortid,pos:i.pos,range:i.range,regionid:i.regionid,nav1:i.nav1,nav2:a.name,nav3:i.nav3,keyword:i.keyword,diffcity:i.diffcity},r=u(n);T(window).unbind("scroll"),p(r,n);var o=location.href.replace(/\/c\/\d*/,"/c/"+a.id);history.pushState({url:r,params:n},"",o)}})}}):("undefined"!=typeof a.currentCategory?(j=a.currentCategory.id,n=T('<div> <p class="item Fix"><span class="ca ca_0"></span>全部分类</p> <div class="menu sub Hide"><div></div></div></div>').appendTo(q)):(j=0,n=T('<div> <p class="item Fix on"><span class="ca ca_0"></span>全部分类</p> <div class="menu sub"><div></div></div></div>').appendTo(q)),n.on("click",function(a){if(a.preventDefault(),B=!1,h&&h.abort(),T(".load-wrap").remove(),v(),c(),T(".loading_pic").show(),w="&categoryid=0",history.pushState){var e={start:0,categoryid:0,sortid:i.sortid,pos:i.pos,range:i.range,regionid:i.regionid,nav1:i.nav1,nav2:"全部分类",nav3:i.nav3,keyword:i.keyword,diffcity:i.diffcity},n=u(e);T(window).unbind("scroll"),p(n,e);var r=location.href.replace(/\/c\/\d*/,"/c/0");history.pushState({url:n,params:e},"",r)}}),a.categoryNavs.forEach(function(a){if(0==a.parentId)n=T('<div> <p class="item Fix"><span class="ca ca_'+a.id+'"></span>'+a.name+'</p> <div class="menu sub Hide"><div></div></div></div>').appendTo(q).find(".sub div");else{var e;a.id!=j||F?e=T('<a class="item Fix" href="" >'+a.name+"</a> ").appendTo(n):(e=T('<a class="item Fix on" href="" >'+a.name+"</a> ").appendTo(n),n.parent().parent().find("p.item").addClass("on"),n.parent().parent().find(".sub").removeClass("Hide"),F=!0),e.on("click",function(e){if(e.preventDefault(),B=!1,h&&h.abort(),T(".load-wrap").remove(),v(),c(),T(".loading_pic").show(),w="&categoryid="+a.id,history.pushState){var n={start:0,categoryid:a.id,sortid:i.sortid,pos:i.pos,range:i.range,regionid:i.regionid,nav1:i.nav1,nav2:a.name,nav3:i.nav3,keyword:i.keyword,diffcity:i.diffcity},r=u(n);T(window).unbind("scroll"),p(r,n);var o=location.href.replace(/\/c\/\d*/,"/c/"+a.id);history.pushState({url:r,params:n},"",o)}})}}));var S,E=T('<section class="selector J_selector Hide"> <div class="menu main full"> <div></div></div></section>').appendTo(e).find(".main div");S="undefined"!=typeof a.currentSort?a.currentSort.id:0,a.sortNavs.forEach(function(e){var n;n=e.id==S?T('<div> <a class="item Fix on" href="" >'+a.currentSort.name+"</a></div>").appendTo(E):T('<div> <a class="item Fix " href="" >'+e.name+"</a></div>").appendTo(E),n.on("click",function(a){if(a.preventDefault(),B=!1,h&&(O=!0),T(".load-wrap").remove(),v(),c(),T(".loading_pic").show(),_="&sortid="+e.id,history.pushState){var n={start:0,categoryid:i.categoryid,sortid:e.id,pos:i.pos,range:i.range,regionid:i.regionid,nav1:i.nav1,nav2:i.nav2,nav3:e.name,keyword:i.keyword,diffcity:i.diffcity},r=u(n);T(window).unbind("scroll"),p(r,n);var o=location.href.replace(/s_-?\d*/,"s_"+e.id);history.pushState({url:r,params:n},"",o)}})})}function t(a){function i(){T.ajax({type:"GET",url:"https://m.dianping.com/epay/thirdchannel/ajax/getBlackList?channelId="+P.channelId,dataType:"jsonp",jsonp:"callback",timeout:1e4,success:function(a){e(a.shopIdBlackList)},error:function(){console.log("blacklist error"),e()}})}function e(i){var e=[];if(!a.list.length||"当前搜索无结果,你可能喜欢以下结果"==a.keywordInfo)return!T(".fruitless").length&&l(),void T(".loading_pic").hide();a.list.forEach(function(a){if(!i||!i.some(function(i){return i==a.id})){var n='<li> <a class="item Fix " href="/shop/'+a.id+"\" onclick=\"_hip.push(['mv', {module: 'shop_list_new', action: 'click',index:'"+a.id+'\'}]);"> <div class="pic"><img src="//www.dpfile.com/mod/app-m-dianping/1.4.2/css/img/picpre.png" lazy-src="'+a.defaultPic+'"></div> <div class="content"> <div class="name"> <h3 class="shopname"><span class="shop_name">'+a.name+"</span>",r=[];"true"!=P.issqt&&(a.memberCardId&&r.push('<span class="mark-card mark-tag"></span>'),a.hasTakeaway&&r.push('<span class="mark-takeaway mark-tag"></span>'),a.hasPromo&&r.push('<span class="mark-promo mark-tag"></span>'),a.hasDeals&&r.push('<span class="mark-group mark-tag"></span>'),(5==a.bookType||a.hotelBookable)&&r.push('<span class="mark-booking mark-tag"></span>')),a.hasMoPay&&r.push('<span class="mark-hui mark-tag"></span>'),n+=r.join(""),n+='</h3> </div> <div class="comment"> <span class="star star-'+a.shopPower+'"></span> <span>'+a.priceText+'</span> </div> <div class="intro Fix">',a.regionName&&(n+="<span>"+a.regionName+"</span>"),a.categoryName&&(n+='<span class="type">'+a.categoryName+"</span>"),n+=' <span class="dis">'+a.shopPositionInfo.text+"</span> </div>";var o="";if(a.shopDealInfos&&a.shopDealInfos.length){var t=['<div class="new-coupon">'];a.shopDealInfos.forEach(function(a){var i=[0,1,2],e=i.some(function(i){return a.dealType==i}),r={0:"hui",1:"tuan",2:"quan"};e&&("true"==P.issqt&&10==P.sqttype?0==a.dealType&&t.push('<div class="coupon"> <span class="coupon-tag '+r[a.dealType]+'"></span>'+a.dealTitle+" </div>"):(t.push('<div class="coupon"> <span class="coupon-tag '+r[a.dealType]+'"></span>'+a.dealTitle+" </div>"),1==a.dealType&&(n=n.replace('<span class="mark-group mark-tag"></span>',""))),0==a.dealType&&(n=n.replace('<span class="mark-hui mark-tag"></span>',"")))}),t.push("</div>"),o=t.join("")}o=o.replace('<div class="new-coupon"></div>',"");var d="</div></a></li>",s=n+o+d;e.push(s)}});var n=T(e.join(""));f.append(n),T(".loading_pic").hide();try{f.append("<script>_hip.push(['mv', {module: '5_shoplist_exposure', action: 'browse'}])</script>")}catch(r){}if(I.LazyLoad(T("img")),d(n),B){var o=+new Date-G_rtop;k.doReport(function(a,i){a.push("21-"+o)},!0)}}"true"==P.issqt&&10==P.sqttype&&"true"==P.shopFilterEnabled?i():e()}function d(a){var i=a.find(".name");i.each(function(){var a=20*T(this).find(".mark-tag").length,i=T(this).width()-a;T(this).find(".shop_name").css("max-width",i)})}function s(){T(".list-nav ").remove()}function c(){T(".search-list").remove(),T(".overlay").last().remove(),T(".list-nav .J_selector").addClass("Hide")}function p(a,i){h=T.ajax({type:"GET",url:a,dataType:"jsonp",jsonp:"callback",timeout:1e4,success:function(a){if(O)return void(O=!1);if(L){L=!1;try{var e=+new Date-G_rtop;k.doReport(function(a,i){a.push("20-"+e)},!0),_hip.push(["_setPVInitData",{p_render:+new Date-G_rtop,module:"0_mshopsearch_queryid",action:"browse",query_id:a.queryId}]),_hip.push(["pv"])}catch(n){}}else try{_hip.push(["mv",{module:"0_mshopsearch_queryid",action:"browse",query_id:a.queryId}])}catch(n){}N=a.queryId,h=null,j=a.isEnd,F=a.nextStartIndex,function(a){var e,n,r;"undefined"!=typeof i.range&&0!=i.range?E&&H?(a.rangeNavs.forEach(function(a){return a.id==i.range?void(e=a.name.indexOf("附近")>-1?"附近":a.name):void 0}),a.currentRange&&(e=a.currentRange.name.indexOf("附近")>-1?"附近":a.currentRange.name)):e="全部商区":"undefined"!=typeof i.regionid&&(a.regionNavs.forEach(function(a){return a.id==i.regionid?void(e=a.name):void 0}),a.currentRegion&&(e=a.currentRegion.name),a.metroNavs.forEach(function(a){return a.id==i.regionid?void(e=a.name):void 0}),void 0==e&&(e=x("nav_1"))),"undefined"!=typeof i.categoryid&&(a.categoryNavs.forEach(function(a){return a.id==i.categoryid?void(n=a.name):void 0}),0==i.categoryid&&(n="全部分类"),void 0==n&&(n=x("nav_2"))),"undefined"!=typeof i.sortid&&(a.sortNavs.forEach(function(a){return a.id==i.sortid?void(r=a.name):void 0}),a.currentSort.id==i.sortid&&(r=a.currentSort.name),void 0==r&&(r=x("nav_3"))),i.nav1=e||"全部商区",i.nav2=n||"全部美食",i.nav3=r||"智能排序"}(a),s(),o(a,i);new b(T(".list-nav"));T(".search-list").length||(f=T('<ul class="search-list J_list"> </ul>'),T("nav").after(f)),f.after('<div class="load-wrap"><div class="loading-img"></div><span>正在加载...</span></div>'),t(a);var r={start:F,categoryid:i.categoryid,sortid:i.sortid,pos:i.pos,range:i.range,regionid:i.regionid,keyword:i.keyword,diffcity:i.diffcity};T(window).scroll(function(){if(!j&&T(window).scrollTop()+T(window).height()+50>=T("body").height()&&!S){if(S)return;B=!1,S=!0;var i=u(r);T.ajax({url:i,dataType:"jsonp",jsonp:"callback",timeout:1e4,beforeSend:function(){T(".load-wrap").css("display","block")},complete:function(){T(".load-wrap").css("display","none")},success:function(i){try{_hip.push(["mv",{module:"8_shoplist_search_more",action:"click",query_id:a.queryId,note:N}])}catch(e){}N=a.queryId,S=!1,j=i.isEnd,r.start=i.nextStartIndex,t(i)},error:function(){}})}})},error:function(){}})}function l(){T("nav").after('<div class="fruitless"> <span class="icon-fruit"></span> <p>没有找到合适的商户</p> <p>看看输入的文字是否有误</p> </div>')}function v(){T(".J_trigger").each(function(a){x("nav_"+(a+1),T(this).text())})}function u(a){var i="http://m.api.dianping.com/searchshop.json?start="+a.start+g+w+_+"&locatecityid="+m+"&cityid="+m;return E&&H&&(i+="&mylat="+E+"&mylng="+H),a.pos&&E&&H&&(i+="&lat="+E+"&lng="+H),a.keyword&&(i+="&keyword="+encodeURIComponent(a.keyword.substr(0,100))),"true"==P.issqt&&(i+="&filters=1-1"),i}var f,m,h,y,g,w,_,k,b=a("list-nav"),T=a("zepto"),x=a("cookie"),I=a("mobile-common"),q=a("huatuo"),j=!1,F=1,S=!1,D=0,E=x("locallat"),H=x("locallng"),C=!1,J=!1,N="",L=!0,R=-1!=location.hostname.indexOf("51ping")?".51ping.com":".dianping.com",z=a("base-op-url"),P={},M=a("whereami"),G=!1,O=!1,B=!0;i.init=function(i){T(function(){function e(a){d.search(a)?(P[a]=d.search(a),x(a,P[a],{domain:R,path:"/"})):P[a]=x(a)}function n(){x("cityid")&&(G=!0,r(i.range,!1,J)),M.config({city:!0}),M(function(a){if(a.city.cityid!=m)if(confirm("您目前定位是在:"+a.city.cityname+",是否切换?"))if(m=a.city.cityid,h)O=!0,r(i.range,!1,J);else{T(".load-wrap").remove(),v(),c(),T(".loading_pic").show();var e={start:0,categoryid:i.categoryid,sortid:i.sortid,pos:J,range:i.range,regionid:i.regionid,keyword:i.keyword,diffcity:!1},n=u(e);T(window).unbind("scroll"),p(n,e)}else x("noswitchcity","1",{expires:.25/24,path:"/",domain:R});else!G&&r(i.range,!1,J)},function(){!G&&r(0,!0,!1)})}function r(a,e,n){var r={start:0,categoryid:i.categoryid,sortid:i.sortid,pos:n,range:a,regionid:i.regionid,keyword:i.keyword,diffcity:e},o=u(r);p(o,r),history.replaceState({url:o,params:r},"",location.href)}m=x("cityid")||i.cityId;var o=!0,t=203;k=new q(t,o),x.remove("curMetroId"),x.remove("curMetroParentId"),x.remove("nav_1"),x.remove("nav_2"),x.remove("nav_3");var d=new z(location.href);if(e("issqt"),e("sqttype"),e("channelId"),e("shopFilterEnabled"),T("body").prepend('<div class="loading_pic"></div>'),window.addEventListener("popstate",function(a){a.state&&(h&&(O=!0),T(".load-wrap").remove(),v(),c(),T(".loading_pic").show(),T(window).unbind("scroll"),p(a.state.url,a.state.params))}),function(a){if(/\/search$/.test(location.pathname)){var i=/\d+/.test(a.regionid);i||(a.regionid="0"),g="&regionid="+a.regionid}else if(J=/\/d\/\d+/.test(location.pathname)){var e=[-1,500,1e3,2e3,5e3].some(function(i){return a.range==i});e||(a.range=-1),g="&range="+a.range}else{var i=/\d+/.test(a.regionid);i||(a.regionid="0"),g="&regionid="+a.regionid}/\d+/.test(a.categoryid)||(a.categoryid="0"),"true"==P.issqt&&10==P.sqttype&&(a.categoryid="10"),w="&categoryid="+a.categoryid,/\d+/.test(a.sortid)||(a.sortid="0"),_="&sortid="+a.sortid}(i),y=T(T(".search_keyword").length?".keyword_frame":T("header").length?"header":"#backup-insert"),n(),!i.hideToTop){var s=T('<a onclick="window.scrollTo(0,0)" class="top-box Hide"><div class="arrow-ent"></div></a>').appendTo("body");T(window).on("scroll",function(){T(window).scrollTop()>0?s.removeClass("Hide"):s.addClass("Hide")})}i.lazyLoad&&I.LazyLoad(T("img")),i.isDynamicLoad&&i.dynamicLoadUrl&&a("./js/dynamic_load")(i.dynamicLoadUrl,i.weixinGeoData)})}},{asyncDeps:u,main:!0,map:a({"./js/dynamic_load":c},m)}),define(c,[n,o,e,p],function(a,i,e,n,r){var o=a("zepto"),t=a("mobile-common"),d=a("list-nav");e.exports=function(i,e){function n(){o.ajax({url:i,dataType:"html",success:function(i){o(".J_loading").addClass("Hide");var e=o(i).insertAfter(r);t.LazyLoad(e.find("img")),a("./loadmore")(o(".J_list")),new d(o(".list-nav"))}})}var r=o("header");t.Geo(n,n,e)}},{asyncDeps:u,map:a({"./loadmore":p},m)}),define(p,[n,l,o],function(a,i,e,n,r){var o=a("zepto"),t=a("wepp-module-toast"),d=a("mobile-common"),s=d.LazyLoad;e.exports=function(a,i){var e,n=!1,r=function(){n=!1,e.text("查看更多")},d=a.find(".J_query_id").val();a.on("click",".J_view_more",function(){n||(e=o(this),n=!0,e.text("正在加载..."),o.ajax({url:i||location.href,data:{reqType:"ajax",page:e.attr("data-page"),keyword:e.attr("data-keyword")},dataType:"html",success:function(i){r(),o(".J_view_more").parent().remove();var e=o(i).appendTo(a);s(e.find("img"));var n=e.eq(0).val();if(n&&d){try{_hip.push(["mv",{module:"8_shoplist_search_more",action:"click",query_id:n,note:d}])}catch(t){}d=n}},error:function(){t("网络出错啦，请稍后再试"),r()}}))});var c=a.find(".link-btn-wrap .new-btn");o(window).scroll(function(){if(0!=c.length&&o(window).scrollTop()+o(window).height()+parseInt(c.attr("data-scroll"))>=o("body").height()&&!n){if(n)return;e=o(".J_view_more"),o.ajax({url:i||location.href,data:{reqType:"ajax",page:c.attr("data-page"),keyword:e.attr("data-keyword")},dataType:"html",success:function(i){r(),o(".J_view_more").parent().remove();var e=o(i).appendTo(a);c=e.find(".link-btn-wrap .new-btn"),s(e.find("img"));var n=e.eq(0).val();if(n&&d){try{_hip.push(["mv",{module:"8_shoplist_search_more",action:"click",query_id:n,note:d}])}catch(t){}d=n}},error:function(){t("网络出错啦，请稍后再试"),r()}})}}),a.on("click",".J_append_more",function(){o(this).parent().find(".J_item").removeClass("Hide"),s(o(this).parent().find(".J_item").find("img")),o(this).remove()})}},{asyncDeps:u,map:m})}();
//# sourceMappingURL=app-m-dianping-list.js.map

!function(){var c="zepto@^1.2.2",t="mobile-common-search@^1.2.6",e="app-m-common-search@0.2.9/index.js",n={},o=n;define(e,[c,t],function(c,t,e,n,o){var i=c("zepto"),r=c("mobile-common-search");t.init=function(c){function t(t){t&&t.data&&t.data.suggestKwList&&t.data.suggestKwList.length?t.data.suggestKwList.forEach(function(c,t){i(s(n.options.historyItemTemplate,{keyword:c})).prependTo(n.keyList).on("click",function(){try{_hip.push(["mv",{module:"5_rec_search",action:"click"}])}catch(t){}n.search(c)})}):n.searchContainer.find(".J_key_list").addClass("Hide"),"tuan"===c.searchType?n.searchContainer.find("form").attr("action","/tuan/search"):n.searchContainer.find("form").attr("action","/shoplist/"+c.cityId+"/search")}var e=c.triggerClass||".J_search_trigger",n=new r({trigger:i(e),suggestUrl:"/ssnew",triggerEvent:"click",historyLength:10,showKeywordAndHistory:!0,suggestOnclick:function(c,t){try{_hip.push(["mv",{module:"2_search_suggest",action:"click",index:1+t,keyword:c.keyword}])}catch(e){}this.search(c.keyword)},onKeywordShow:function(){try{_hip.push(["mv",{module:"5_rec_search",action:"browse"}])}catch(c){}},onHistoryShow:function(){try{_hip.push(["mv",{module:"5_his_search",action:"browse"}])}catch(c){}},historyOnclick:function(c,t){try{_hip.push(["mv",{module:"5_his_search",action:"click",index:t+1}])}catch(e){}this.search(c)},searchOnClick:function(){try{_hip.push(["mv",{module:"5_rec_search_method",action:"click"}])}catch(c){}}});n.options&&n.options.historyItemTemplate&&(i.ajax({url:"/suggest/getJsonData",dataType:"json",success:function(c){t(c)},error:function(){console.log("ajax error"),t()}}),i(".J_form").on("submit",function(c){try{_hip.push(["mv",{module:"5_rec_search_btn",action:"click"}])}catch(c){}}),i(".J_cancel").on("click",function(c){try{_hip.push(["mv",{module:"5_J_cancel",action:"click"}])}catch(c){}}))};var s=function(c,t){return"function"==typeof c&&(c=c(t)),c.replace(/{([^{}]*)}/g,function(c,e){return e in t?t[e]:""})}},{main:!0,map:o})}();
//# sourceMappingURL=app-m-common-search.js.map

define("cookie@0.2.0/cookie",[],function(e,n,r){function o(e){return f.raw?e:encodeURIComponent(e)}function t(e){return f.raw?e:decodeURIComponent(e)}function i(e){return o(f.json?JSON.stringify(e):String(e))}function c(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(l," ")),f.json?JSON.parse(e):e}catch(n){}}function u(e,n){var r=f.raw?e:c(e);return s(n)?n(r):r}var a,f,p,s=function(e){return"[object Function]"==Object.prototype.toString.call(e)},d=function(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n)for(var r in n)e[r]=n[r]}),e},l=/\+/g;f=a=function(e,n,r){if(void 0!==n&&!s(n)){if(r=d({},f.defaults,r),"number"==typeof r.expires){var c=r.expires,a=r.expires=new Date;a.setTime(+a+864e5*c)}return document.cookie=[o(e),"=",i(n),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}for(var p=e?void 0:{},l=document.cookie?document.cookie.split("; "):[],m=0,v=l.length;v>m;m++){var g=l[m].split("="),x=t(g.shift()),h=g.join("=");if(e&&e===x){p=u(h,n);break}e||void 0===(h=u(h))||(p[x]=h)}return p},f.defaults={},p=function(e,n){return void 0===a(e)?!1:(a(e,"",d({},n,{expires:-1})),!a(e))},a.remove=p,r.exports=a},{main:!0});

!function(){var e="load-event@0.1.0/index.js",n={},t=n;define(e,[],function(e,n,t){var o=window,a=document,c=a.createElement("div"),i="addEventListener",d="removeEventListener",r=c[i]?function(e,n,t,o){e[i](n,t,!!o)}:function(e,n,t){e.attachEvent("on"+n,t)},f=c[d]?function(e,n,t,o){e[d](n,t,!!o)}:function(e,n,t){e.detachEvent("on"+n,t)};t.exports=function(e){if("complete"===a.readyState)return e();var n=a.documentElement.doScroll,t=n?"readystatechange":"DOMContentLoaded",c=function(){f(a,t,c),f(o,"load",c),e()};if(r(a,t,c),r(o,"load",c),n){var i=function(){try{n("left"),c()}catch(e){setTimeout(i,10)}},d=!1;try{d=null==o.frameElement}catch(u){}d&&i()}}},{main:!0,map:t})}();

!function(){function e(e,r){for(var t in r)e[t]=r[t];return e}var r="env@0.1.1/util/native.js",t="env@0.1.1/module/platform.js",n="env@0.1.1/module/system.js",a="env@0.1.1/module/page.js",i="env@0.1.1/index.js",o={},c=o;define(i,[r,t,n,a],function(e,r,t,n,a){e("./util/native"),t.exports={platform:e("./module/platform"),system:e("./module/system"),page:e("./module/page")}},{main:!0,map:e({"./util/native":r,"./module/platform":t,"./module/system":n,"./module/page":a},c)}),define(r,[],function(e,r,t,n,a){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")})},{map:c}),define(t,[],function(e,r,t,n,a){function i(){for(var e in c){var r=c[e];if(r.check(o,e))return r.get(o,e)}return{name:"",version:""}}var o=navigator.userAgent,c={weixin:{check:function(){var e=Array.prototype.slice.call(arguments);return/MicroMessenger\/([^\s]+)/.test(e[0])},get:function(){var e=Array.prototype.slice.call(arguments);return{name:e[1],version:/MicroMessenger\/([^\s]+)/.exec(e[0])[1].trim()}}},qq:{check:function(){var e=Array.prototype.slice.call(arguments);return/QQ\/([^\s]+)/.test(e[0])},get:function(){var e=Array.prototype.slice.call(arguments);return{name:e[1],version:/QQ\/([^\s]+)/.exec(e[0])[1].trim()}}},milife:{check:function(){var e=Array.prototype.slice.call(arguments);return/XiaoMi(.+)Milife/i.test(e[0])},get:function(){var e=Array.prototype.slice.call(arguments);return{name:e[1],version:""}}},dp:{check:function(){var e=Array.prototype.slice.call(arguments);return/dianping\.[^\/]+\/([^\s]+)/.test(e[0])},get:function(){var e=Array.prototype.slice.call(arguments);return{name:e[1],version:/dianping\.[^\/]+\/([^\s]+)/.exec(e[0])[1].trim()}}},wlt:{check:function(){var e=Array.prototype.slice.call(arguments);return/wanlitong_(?:[^\d]+)([^\s+]+)/.test(e[0])},get:function(){var e=Array.prototype.slice.call(arguments);return{name:e[1],version:/wanlitong_(?:[^\d]+)([^\s+]+)/.exec(e[0])[1].trim()}}}};t.exports=i()},{map:c}),define(n,[],function(e,r,t,n,a){function i(){for(var e in c){var r=c[e];if(r.check(o,e))return r.get(o,e)}return{name:"",version:""}}var o=navigator.userAgent,c={ios:{check:function(){var e=Array.prototype.slice.call(arguments);return/OS (.*?)like Mac/.test(e[0])},get:function(){var e=Array.prototype.slice.call(arguments);return{name:e[1],version:/OS (.*?)like Mac OS/.exec(e[0])[1].trim().replace(/_/g,".")}}},os:{check:function(){var e=Array.prototype.slice.call(arguments);return/Intel Mac OS X (.*?)\)/.test(e[0])},get:function(){var e=Array.prototype.slice.call(arguments);return{name:e[1],version:/Intel Mac OS X (.*?)\)/.exec(e[0])[1].trim().replace(/_/g,".")}}},android:{check:function(){var e=Array.prototype.slice.call(arguments);return/Android (.*?);/.test(e[0])},get:function(){var e=Array.prototype.slice.call(arguments);return{name:e[1],version:/Android (.*?);/.exec(e[0])[1].trim()}}},win:{check:function(){var e=Array.prototype.slice.call(arguments);return/Windows NT (.*?);/.test(e[0])},get:function(){var e=Array.prototype.slice.call(arguments);return{name:e[1],version:/Windows NT (.*?);/.exec(e[0])[1].trim()}}}};t.exports=i()},{map:c}),define(a,[],function(e,r,t,n,a){var i=location.host;t.exports=-1!=i.indexOf("ppe")?"ppe":-1!=i.indexOf("dianping")?"product":-1!=i.indexOf("51ping")?"beta":"dev"},{map:c})}();
//# sourceMappingURL=env.js.map

!function(){function e(e,n){for(var t in n)e[t]=n[t];return e}var n="dpapp@^1.1.11",t="weixin-js-sdk-loader@~0.1.0",i="whereami@0.2.1/lib/config.js",o="whereami@0.2.1/lib/geos/cache.js",a="whereami@0.2.1/lib/request.js",r="whereami@0.2.1/lib/log.js",c="whereami@0.2.1/lib/geos/url.js",s="whereami@0.2.1/lib/geos/weixin.js",l="whereami@0.2.1/lib/geos/qqbrowser.js",u="whereami@0.2.1/lib/geos/mobileqq.js",g="whereami@0.2.1/lib/geos/app.js",p="whereami@0.2.1/lib/geos/meituanapp.js",f="whereami@0.2.1/lib/geos/html.js",m="cookie@~0.2.0",d="whereami@0.2.1/lib/util.js",h="whereami@0.2.1/index.js",w=[n,t],y={dpapp:n,"weixin-js-sdk-loader":t},x=y;define(h,[i,o,a,r,c,s,l,u,g,p,f],function(e,n,t,i,o){function a(e,n){for(var t=0,i=e.length;i>t;t++)e.shift().apply(this,n||[])}var r=e("./lib/config"),c=e("./lib/geos/cache"),s=e("./lib/request"),l=e("./lib/log"),u=[e("./lib/geos/url"),c,e("./lib/geos/weixin"),e("./lib/geos/qqbrowser"),e("./lib/geos/mobileqq"),e("./lib/geos/app"),e("./lib/geos/meituanapp"),e("./lib/geos/html")],g=function(){return!!navigator.userAgent.match(/spider/i)},p=[],f=[],m=!1,d=~location.href.indexOf("debug:whereami");t.exports=function(e,n){if(g())return void n();if(e&&p.push(e),n&&f.push(n),!m){m=!0;var t,i,o=!1,h=r.get("timeout"),w=r.get("disables"),y=+new Date,x=d||r.get("debug"),v=function(e){clearTimeout(t),m=!1,o||(x&&alert(JSON.stringify(e)),l(y,i,!0),r.get("city")?s({url:"//m.dianping.com/getlocalcityid",data:{lat:e.lat,lng:e.lng},onSuc:function(n){200==n.code&&n.message&&(e.city=n.message),a(p,[e])}}):a(p,[e]),"cache"!==e.type&&w&&!~w.indexOf("cache")&&c.set(e.lat,e.lng))},b=function(){clearTimeout(t),m=!1,o||(a(f),l(y,i,!1),l.logError(i,JSON.stringify(Array.prototype.slice.call(arguments,0))))};h&&(t=setTimeout(function(){b("timeout in "+h),o=!0},h));var q=-1;!function j(){q++,u[q]?(i=u[q].type,w&&~w.indexOf(i)?j():(x&&alert("start geos:"+i),u[q](function(e){e.type=i,v(e)},b,j))):b({message:"no geo support"})}()}},t.exports.config=r.config,t.exports.init=function(){r.config({wxAutoConfig:!0}),t.exports(function(e){console.log(e)},function(){console.log("fail")})}},{asyncDeps:w,main:!0,map:e({"./lib/config":i,"./lib/geos/cache":o,"./lib/request":a,"./lib/log":r,"./lib/geos/url":c,"./lib/geos/weixin":s,"./lib/geos/qqbrowser":l,"./lib/geos/mobileqq":u,"./lib/geos/app":g,"./lib/geos/meituanapp":p,"./lib/geos/html":f},x)}),define(i,[],function(e,n,t,i,o){var a={timeout:1e4,disables:[],urlParamNames:["latitude","longitude"],cacheType:"cookie",cookieNames:["locallat","locallng"],storageName:"whereami",wxAutoConfig:!1,city:!1,debug:!1};n.get=function(e){return a[e]},n.set=function(e,n){a[e]=n},n.config=function(e){Object.keys(e).forEach(function(n){a[n]=e[n]})}},{asyncDeps:w,map:x}),define(o,[m,i],function(e,n,t,i,o){var a=e("cookie"),r=e("../config"),c=r.get("cookieNames"),s=r.get("cacheType"),l=c[0],u=c[1],g=r.get("storageName"),p=15,f=function(){var e=window.localStorage&&null!=window.localStorage,n="local_test";if(e)try{localStorage.setItem(n,1),localStorage.removeItem(n)}catch(t){return!1}return e};t.exports=function(e,n,t){if(s)if("cookie"==s){var i=a(l),o=a(u);i&&o?e({lat:i,lng:o}):t()}else if("storage"==s)if(f()){var r=localStorage.getItem(g);if(r){var c;try{c=JSON.parse(r),c||t()}catch(m){t()}var d=c.time,h=+c.lat,w=+c.lng;+new Date-d>60*p*1e3||!h||!w?(localStorage.removeItem(g),t()):e({lat:h,lng:w})}else t()}else t();else t();else t()},t.exports.type="cache",t.exports.set=function(e,n){if(s)if("cookie"==s){var t={expires:p/60/24,path:"/"};~location.hostname.indexOf("51ping.com")?t.domain=".51ping.com":~location.hostname.indexOf("dianping.com")&&(t.domain=".dianping.com"),a(l,e,t),a(u,n,t)}else if("storage"==s){if(!f())return;localStorage.setItem(g,JSON.stringify({lat:e,lng:n,time:+new Date}))}}},{asyncDeps:w,map:e({"../config":i},x)}),define(a,[],function(e,n,t,i,o){var a=0,r=function(e,n){if(!n)return e;var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i+"="+n[i]);return~e.indexOf("?")?e+t.join("&"):e+"?"+t.join("&")};t.exports=function(e){if(!e.url)throw new Error("url request!");var n=e.data||{},t=e.onSuc||function(){},i=n.callback="WhereAmI"+ ++a+ +new Date,o=document.createElement("script");o.src=r(e.url,n),window[i]=function(e){delete window[i],o.parentNode.removeChild(o),t(e)},document.getElementsByTagName("head")[0].appendChild(o)}},{asyncDeps:w,map:x}),define(r,[a],function(e,n,t,i,o){var a=e("./request");t.exports=function(e,n,t){var i="whereami-type-all",o="whereami-type-"+n,a={v:1,ts:+new Date,tu:i,d:+new Date-e,hs:t?200:500,ec:""};r(a),a.tu=o,r(a)};var r=function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t+"="+e[t]);var i=new Image;i.src="//catdot.dianping.com/broker-service/api/single?"+n.join("&")};t.exports.logError=function(e,n){var t=~location.href.indexOf("dianping.com")?"m.dianping.com":"m.51ping.com";a({url:"//"+t+"/statictest/logevent",data:{name:"WhereAmIFail",info:encodeURIComponent(e+"-"+n)}}),~n.indexOf("no geo support")&&a({url:"//"+t+"/statictest/logevent",data:{name:"WhereAmIFailUA",info:navigator.userAgent}})}},{asyncDeps:w,map:e({"./request":a},x)}),define(c,[i],function(e,n,t,i,o){var a=e("../config"),r=a.get("urlParamNames"),c=r[0],s=r[1],l=new RegExp(c+"=([^$&]+)"),u=new RegExp(s+"=([^$&]+)");t.exports=function(e,n,t){var i=location.search,o=i.match(l),a=i.match(u);o&&a&&!isNaN(o[1])&&!isNaN(a[1])?e({lat:o[1],lng:a[1]}):t()},t.exports.type="url"},{asyncDeps:w,map:e({"../config":i},x)}),define(s,[i,d],function(e,n,t,i,o){var a=e("../config"),r=(e("../util"),~location.href.indexOf("debug:whereami"),function(){return/MicroMessenger/.test(navigator.userAgent)});t.exports=function(n,t,i){if(r()){var o=function(){return"undefined"==typeof wx?void i():void wx.ready(function(){wx.checkJsApi({jsApiList:["getLocation"],success:function(e){e.checkResult&&e.checkResult.getLocation?wx.getLocation({type:"wgs84",success:function(e){n({lat:e.latitude,lng:e.longitude})},fail:t}):i()},fail:i})})};a.get("wxAutoConfig")&&"undefined"==typeof wx?e.async("weixin-js-sdk-loader",function(e){e.use(o)}):o()}else i()},t.exports.type="weixin"},{asyncDeps:w,map:e({"../config":i,"../util":d},x)}),define(l,[d],function(e,n,t,i,o){var a=e("../util"),r=function(){return~navigator.userAgent.indexOf("MQQBrowser")};t.exports=function(e,n,t){r()?a.loadScript("http://jsapi.qq.com/get?api=app.getGeoLocation",function(){try{browser.app.getGeoLocation(function(t){"true"===t.ret?e({lat:t.latitude,lng:t.longitude}):n.apply(this,Array.prototype.slice.call(arguments,0))},n)}catch(i){t()}}):t()},t.exports.type="qqbrowser"},{asyncDeps:w,map:e({"../util":d},x)}),define(u,[d],function(e,n,t,i,o){var a=e("../util"),r=function(){return navigator.userAgent.match(/(.*?(iPad|iPhone|iPod).*?QQ\/([\d\.]+).*?)|(.*?\bV1_AND_SQI?_([\d\.]+)(.*?QQ\/([\d\.]+))?.*?)/i)};t.exports=function(e,n,t){r()?a.loadScript("http://m1.s1.dpfile.com/s/j/app/activity/comm/qqapi.428dbe2dc18e9b860465922d6a923595.js",function(){window.mqq&&window.mqq.sensor&&window.mqq.sensor.getLocation?mqq.sensor.getLocation({allowCacheTime:60},function(t,i,o){0==t&&i&&o?e({lat:i,lng:o}):n.apply(this,Array.prototype.slice.call(arguments,0))}):t()}):t()},t.exports.type="mobileqq"},{asyncDeps:w,map:e({"../util":d},x)}),define(g,[],function(e,n,t,i,o){var a=function(){return~navigator.userAgent.indexOf("dianping")};t.exports=function(n,t,i){a()?e.async("dpapp",function(e){e.ready(function(){e.getLocation({success:function(e){n({lat:e.lat,lng:e.lng})},fail:t})})}):i()},t.exports.type="app"},{asyncDeps:w,map:x}),define(p,[],function(e,n,t,i,o){var a=new RegExp("lat=([^$&]+)"),r=new RegExp("lng=([^$&]+)"),c=function(){return~navigator.userAgent.indexOf("Meituan")};t.exports=function(e,n,t){if(c()){var i=location.search,o=i.match(a),s=i.match(r);o&&s&&!isNaN(o[1])&&!isNaN(s[1])?e({lat:o[1],lng:s[1]}):t()}else t()},t.exports.type="meituan"},{asyncDeps:w,map:x}),define(f,[i],function(e,n,t,i,o){var a=e("../config"),r=function(){return!!navigator.geolocation};t.exports=function(e,n,t){r()?navigator.geolocation.getCurrentPosition(function(n){e({lat:n.coords.latitude,lng:n.coords.longitude})},function(e){n(e?{code:e.code,message:e.message}:{message:"unknown error"})},{enableHighAccuracy:!0,maximumAge:3e4,timeout:a.get("timeout")||1e5}):t()},t.exports.type="html"},{asyncDeps:w,map:e({"../config":i},x)}),define(d,[],function(e,n,t,i,o){var a=[];n.loadScript=function(e,n){if(~a.indexOf(e))return void n();var t=document.createElement("script");t.src=e,t.onload=function(){a.push(e),n()},document.getElementsByTagName("head")[0].appendChild(t)}},{asyncDeps:w,map:x})}();
//# sourceMappingURL=whereami.js.map

define("iscroll@5.0.11/build/iscroll-probe",[],function(t,i,s){var e=function(t,i,s){function e(t,s){this.wrapper="string"==typeof t?i.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeIndicator:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var e in s)this.options[e]=s[e];this.translateZ=this.options.HWCompositing&&h.hasPerspective?" translateZ(0)":"",this.options.useTransition=h.hasTransition&&this.options.useTransition,this.options.useTransform=h.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?h.ease[this.options.bounceEasing]||h.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(t,s,e){var o=i.createElement("div"),n=i.createElement("div");return e===!0&&(o.style.cssText="position:absolute;z-index:9999",n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),n.className="iScrollIndicator","h"==t?(e===!0&&(o.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",n.style.height="100%"),o.className="iScrollHorizontalScrollbar"):(e===!0&&(o.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",n.style.width="100%"),o.className="iScrollVerticalScrollbar"),s||(o.style.pointerEvents="none"),o.appendChild(n),o}function n(s,e){this.wrapper="string"==typeof e.el?i.querySelector(e.el):e.el,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=s,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,speedRatioX:0,speedRatioY:0};for(var o in e)this.options[o]=e[o];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(h.addEvent(this.indicator,"touchstart",this),h.addEvent(t,"touchend",this)),this.options.disablePointer||(h.addEvent(this.indicator,"MSPointerDown",this),h.addEvent(t,"MSPointerUp",this)),this.options.disableMouse||(h.addEvent(this.indicator,"mousedown",this),h.addEvent(t,"mouseup",this)))}var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(i){t.setTimeout(i,1e3/60)},h=function(){function e(t){return r===!1?!1:""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1)}var o={},n=i.createElement("div").style,r=function(){for(var t,i=["t","webkitT","MozT","msT","OT"],s=0,e=i.length;e>s;s++)if(t=i[s]+"ransform",t in n)return i[s].substr(0,i[s].length-1);return!1}();o.getTime=Date.now||function(){return(new Date).getTime()},o.extend=function(t,i){for(var s in i)t[s]=i[s]},o.addEvent=function(t,i,s,e){t.addEventListener(i,s,!!e)},o.removeEvent=function(t,i,s,e){t.removeEventListener(i,s,!!e)},o.momentum=function(t,i,e,o,n){var r,h,a=t-i,l=s.abs(a)/e,c=6e-4;return r=t+l*l/(2*c)*(0>a?-1:1),h=l/c,o>r?(r=n?o-n/2.5*(l/8):o,a=s.abs(r-t),h=a/l):r>0&&(r=n?n/2.5*(l/8):0,a=s.abs(t)+r,h=a/l),{destination:s.round(r),duration:h}};var h=e("transform");return o.extend(o,{hasTransform:h!==!1,hasPerspective:e("perspective")in n,hasTouch:"ontouchstart"in t,hasPointer:navigator.msPointerEnabled,hasTransition:e("transition")in n}),o.isBadAndroid=/Android/.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),o.extend(o.style={},{transform:h,transitionTimingFunction:e("transitionTimingFunction"),transitionDuration:e("transitionDuration"),transformOrigin:e("transformOrigin")}),o.hasClass=function(t,i){var s=new RegExp("(^|\\s)"+i+"(\\s|$)");return s.test(t.className)},o.addClass=function(t,i){if(!o.hasClass(t,i)){var s=t.className.split(" ");s.push(i),t.className=s.join(" ")}},o.removeClass=function(t,i){if(o.hasClass(t,i)){var s=new RegExp("(^|\\s)"+i+"(\\s|$)","g");t.className=t.className.replace(s," ")}},o.offset=function(t){for(var i=-t.offsetLeft,s=-t.offsetTop;t=t.offsetParent;)i-=t.offsetLeft,s-=t.offsetTop;return{left:i,top:s}},o.preventDefaultException=function(t,i){for(var s in i)if(i[s].test(t[s]))return!0;return!1},o.extend(o.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),o.extend(o.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return s.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var i=4;return(t-=1)*t*((i+1)*t+i)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var i=.22,e=.4;return 0===t?0:1==t?1:e*s.pow(2,-10*t)*s.sin(2*(t-i/4)*s.PI/i)+1}}}),o.tap=function(t,s){var e=i.createEvent("Event");e.initEvent(s,!0,!0),e.pageX=t.pageX,e.pageY=t.pageY,t.target.dispatchEvent(e)},o.click=function(t){var s,e=t.target;"SELECT"!=e.tagName&&"INPUT"!=e.tagName&&"TEXTAREA"!=e.tagName&&(s=i.createEvent("MouseEvents"),s.initMouseEvent("click",!0,!0,t.view,1,e.screenX,e.screenY,e.clientX,e.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),s._constructed=!0,e.dispatchEvent(s))},o}();return e.prototype={version:"5.0.8",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(!(1!=h.eventType[t.type]&&0!==t.button||!this.enabled||this.initiated&&h.eventType[t.type]!==this.initiated)){!this.options.preventDefault||h.isBadAndroid||h.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var i,e=t.touches?t.touches[0]:t;this.initiated=h.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=h.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,i=this.getComputedPosition(),this._translate(s.round(i.x),s.round(i.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=e.pageX,this.pointY=e.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&h.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var i,e,o,n,r=t.touches?t.touches[0]:t,a=r.pageX-this.pointX,l=r.pageY-this.pointY,c=h.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=a,this.distY+=l,o=s.abs(this.distX),n=s.abs(this.distY),!(c-this.endTime>300&&10>o&&10>n)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=o>n+this.options.directionLockThreshold?"h":n>=o+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}a=this.hasHorizontalScroll?a:0,l=this.hasVerticalScroll?l:0,i=this.x+a,e=this.y+l,(i>0||i<this.maxScrollX)&&(i=this.options.bounce?this.x+a/3:i>0?0:this.maxScrollX),(e>0||e<this.maxScrollY)&&(e=this.options.bounce?this.y+l/3:e>0?0:this.maxScrollY),this.directionX=a>0?-1:0>a?1:0,this.directionY=l>0?-1:0>l?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(i,e),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(t){if(this.enabled&&this.initiated&&h.eventType[t.type]===this.initiated){this.options.preventDefault&&!h.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var i,e,o=(t.changedTouches?t.changedTouches[0]:t,h.getTime()-this.startTime),n=s.round(this.x),r=s.round(this.y),a=s.abs(n-this.startX),l=s.abs(r-this.startY),c=0,p="";if(this.scrollTo(n,r),this.isInTransition=0,this.initiated=0,this.endTime=h.getTime(),!this.resetPosition(this.options.bounceTime)){if(!this.moved)return this.options.tap&&h.tap(t,this.options.tap),void(this.options.click&&h.click(t));if(this._events.flick&&200>o&&100>a&&100>l)return void this._execEvent("flick");if(this.options.momentum&&300>o&&(i=this.hasHorizontalScroll?h.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0):{destination:n,duration:0},e=this.hasVerticalScroll?h.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0):{destination:r,duration:0},n=i.destination,r=e.destination,c=s.max(i.duration,e.duration),this.isInTransition=1),this.options.snap){var d=this._nearestSnap(n,r);this.currentPage=d,c=this.options.snapSpeed||s.max(s.max(s.min(s.abs(n-d.x),1e3),s.min(s.abs(r-d.y),1e3)),300),n=d.x,r=d.y,this.directionX=0,this.directionY=0,p=this.options.bounceEasing}return n!=this.x||r!=this.y?((n>0||n<this.maxScrollX||r>0||r<this.maxScrollY)&&(p=h.ease.quadratic),void this.scrollTo(n,r,c,p)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var i=this.x,s=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?i=0:this.x<this.maxScrollX&&(i=this.maxScrollX),!this.hasVerticalScroll||this.y>0?s=0:this.y<this.maxScrollY&&(s=this.maxScrollY),i==this.x&&s==this.y?!1:(this.scrollTo(i,s,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=h.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,i){this._events[t]||(this._events[t]=[]),this._events[t].push(i)},_execEvent:function(t){if(this._events[t]){var i=0,s=this._events[t].length;if(s)for(;s>i;i++)this._events[t][i].call(this)}},scrollBy:function(t,i,s,e){t=this.x+t,i=this.y+i,s=s||0,this.scrollTo(t,i,s,e)},scrollTo:function(t,i,s,e){e=e||h.ease.circular,this.isInTransition=this.options.useTransition&&s>0,!s||this.options.useTransition&&e.style?(this._transitionTimingFunction(e.style),this._transitionTime(s),this._translate(t,i)):this._animate(t,i,s,e.fn)},scrollToElement:function(t,i,e,o,n){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=h.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,e===!0&&(e=s.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),o===!0&&(o=s.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=e||0,r.top-=o||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,i=void 0===i||null===i||"auto"===i?s.max(s.abs(this.x-r.left),s.abs(this.y-r.top)):i,this.scrollTo(r.left,r.top,i,n)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[h.style.transitionDuration]=t+"ms",!t&&h.isBadAndroid&&(this.scrollerStyle[h.style.transitionDuration]="0.001s"),this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[h.style.transitionTimingFunction]=t,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].transitionTimingFunction(t)},_translate:function(t,i){if(this.options.useTransform?this.scrollerStyle[h.style.transform]="translate("+t+"px,"+i+"px)"+this.translateZ:(t=s.round(t),i=s.round(i),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=i+"px"),this.x=t,this.y=i,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].updatePosition()},_initEvents:function(i){var s=i?h.removeEvent:h.addEvent,e=this.options.bindToWrapper?this.wrapper:t;s(t,"orientationchange",this),s(t,"resize",this),this.options.click&&s(this.wrapper,"click",this,!0),this.options.disableMouse||(s(this.wrapper,"mousedown",this),s(e,"mousemove",this),s(e,"mousecancel",this),s(e,"mouseup",this)),h.hasPointer&&!this.options.disablePointer&&(s(this.wrapper,"MSPointerDown",this),s(e,"MSPointerMove",this),s(e,"MSPointerCancel",this),s(e,"MSPointerUp",this)),h.hasTouch&&!this.options.disableTouch&&(s(this.wrapper,"touchstart",this),s(e,"touchmove",this),s(e,"touchcancel",this),s(e,"touchend",this)),s(this.scroller,"transitionend",this),s(this.scroller,"webkitTransitionEnd",this),s(this.scroller,"oTransitionEnd",this),s(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var i,s,e=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(e=e[h.style.transform].split(")")[0].split(", "),i=+(e[12]||e[4]),s=+(e[13]||e[5])):(i=+e.left.replace(/[^-\d.]/g,""),s=+e.top.replace(/[^-\d.]/g,"")),{x:i,y:s}},_initIndicators:function(){var t,i=this.options.interactiveScrollbars,s=("object"!=typeof this.options.scrollbars,"string"!=typeof this.options.scrollbars),e=[];this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:o("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:s,resize:this.options.resizeIndicator,listenX:!1},this.wrapper.appendChild(t.el),e.push(t)),this.options.scrollX&&(t={el:o("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:s,resize:this.options.resizeIndicator,listenY:!1},this.wrapper.appendChild(t.el),e.push(t))),this.options.indicators&&(e=e.concat(this.options.indicators));for(var r=e.length;r--;)this.indicators[r]=new n(this,e[r]);this.on("refresh",function(){if(this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].refresh()}),this.on("destroy",function(){if(this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].destroy();delete this.indicators})},_initWheel:function(){h.addEvent(this.wrapper,"wheel",this),h.addEvent(this.wrapper,"mousewheel",this),h.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){h.removeEvent(this.wrapper,"wheel",this),h.removeEvent(this.wrapper,"mousewheel",this),h.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var i,e,o,n,r=this;if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){r._execEvent("scrollEnd")},400),"deltaX"in t)i=-t.deltaX,e=-t.deltaY;else if("wheelDeltaX"in t)i=t.wheelDeltaX/120*this.options.mouseWheelSpeed,e=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)i=e=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;i=e=-t.detail/3*this.options.mouseWheelSpeed}if(i*=this.options.invertWheelDirection,e*=this.options.invertWheelDirection,this.hasVerticalScroll||(i=e,e=0),this.options.snap)return o=this.currentPage.pageX,n=this.currentPage.pageY,i>0?o--:0>i&&o++,e>0?n--:0>e&&n++,void this.goToPage(o,n);o=this.x+s.round(this.hasHorizontalScroll?i:0),n=this.y+s.round(this.hasVerticalScroll?e:0),o>0?o=0:o<this.maxScrollX&&(o=this.maxScrollX),n>0?n=0:n<this.maxScrollY&&(n=this.maxScrollY),this.scrollTo(o,n,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,i,e,o,n,r,h=0,a=0,l=0,c=this.options.snapStepX||this.wrapperWidth,p=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(e=s.round(c/2),o=s.round(p/2);l>-this.scrollerWidth;){for(this.pages[h]=[],t=0,n=0;n>-this.scrollerHeight;)this.pages[h][t]={x:s.max(l,this.maxScrollX),y:s.max(n,this.maxScrollY),width:c,height:p,cx:l-e,cy:n-o},n-=p,t++;l-=c,h++}else for(r=this.options.snap,t=r.length,i=-1;t>h;h++)(0===h||r[h].offsetLeft<=r[h-1].offsetLeft)&&(a=0,i++),this.pages[a]||(this.pages[a]=[]),l=s.max(-r[h].offsetLeft,this.maxScrollX),n=s.max(-r[h].offsetTop,this.maxScrollY),e=l-s.round(r[h].offsetWidth/2),o=n-s.round(r[h].offsetHeight/2),this.pages[a][i]={x:l,y:n,width:r[h].offsetWidth,height:r[h].offsetHeight,cx:e,cy:o},l>this.maxScrollX&&a++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=s.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=s.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||s.max(s.max(s.min(s.abs(this.x-this.startX),1e3),s.min(s.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,i){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var e=0,o=this.pages.length,n=0;if(s.abs(t-this.absStartX)<this.snapThresholdX&&s.abs(i-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY);o>e;e++)if(t>=this.pages[e][0].cx){t=this.pages[e][0].x;break}for(o=this.pages[e].length;o>n;n++)if(i>=this.pages[0][n].cy){i=this.pages[0][n].y;break}return e==this.currentPage.pageX&&(e+=this.directionX,0>e?e=0:e>=this.pages.length&&(e=this.pages.length-1),t=this.pages[e][0].x),n==this.currentPage.pageY&&(n+=this.directionY,0>n?n=0:n>=this.pages[0].length&&(n=this.pages[0].length-1),i=this.pages[0][n].y),{x:t,y:i,pageX:e,pageY:n}},goToPage:function(t,i,e,o){o=o||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),i>=this.pages[t].length?i=this.pages[t].length-1:0>i&&(i=0);var n=this.pages[t][i].x,r=this.pages[t][i].y;e=void 0===e?this.options.snapSpeed||s.max(s.max(s.min(s.abs(n-this.x),1e3),s.min(s.abs(r-this.y),1e3)),300):e,this.currentPage={x:n,y:r,pageX:t,pageY:i},this.scrollTo(n,r,e,o)},next:function(t,i){var s=this.currentPage.pageX,e=this.currentPage.pageY;s++,s>=this.pages.length&&this.hasVerticalScroll&&(s=0,e++),this.goToPage(s,e,t,i)},prev:function(t,i){var s=this.currentPage.pageX,e=this.currentPage.pageY;s--,0>s&&this.hasVerticalScroll&&(s=0,e--),this.goToPage(s,e,t,i)},_initKeys:function(){var i,s={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in s)this.options.keyBindings[i]=this.options.keyBindings[i]||s[i];h.addEvent(t,"keydown",this),this.on("destroy",function(){h.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var i,e=this.options.snap,o=e?this.currentPage.pageX:this.x,n=e?this.currentPage.pageY:this.y,r=h.getTime(),a=this.keyTime||0,l=.25;switch(this.options.useTransition&&this.isInTransition&&(i=this.getComputedPosition(),this._translate(s.round(i.x),s.round(i.y)),this.isInTransition=!1),this.keyAcceleration=200>r-a?s.min(this.keyAcceleration+l,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=e?1:this.wrapperWidth:n+=e?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=e?1:this.wrapperWidth:n-=e?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=e?this.pages.length-1:this.maxScrollX,n=e?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0,n=0;break;case this.options.keyBindings.left:o+=e?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:n+=e?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=e?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:n-=e?1:5+this.keyAcceleration>>0;break;default:return}if(e)return void this.goToPage(o,n);o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollY&&(n=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,n,0),this.keyTime=r}},_animate:function(t,i,s,e){function o(){var d,u,m,f=h.getTime();return f>=p?(n.isAnimating=!1,n._translate(t,i),void(n.resetPosition(n.options.bounceTime)||n._execEvent("scrollEnd"))):(f=(f-c)/s,m=e(f),d=(t-a)*m+a,u=(i-l)*m+l,n._translate(d,u),n.isAnimating&&r(o),void(3==n.options.probeType&&n._execEvent("scroll")))}var n=this,a=this.x,l=this.y,c=h.getTime(),p=c+s;this.isAnimating=!0,o()},handleEvent:function(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},n.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(h.removeEvent(this.indicator,"touchstart",this),h.removeEvent(this.indicator,"MSPointerDown",this),h.removeEvent(this.indicator,"mousedown",this),h.removeEvent(t,"touchmove",this),h.removeEvent(t,"MSPointerMove",this),h.removeEvent(t,"mousemove",this),h.removeEvent(t,"touchend",this),h.removeEvent(t,"MSPointerUp",this),h.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(i){var s=i.touches?i.touches[0]:i;i.preventDefault(),i.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=s.pageX,this.lastPointY=s.pageY,this.startTime=h.getTime(),this.options.disableTouch||h.addEvent(t,"touchmove",this),this.options.disablePointer||h.addEvent(t,"MSPointerMove",this),this.options.disableMouse||h.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var i,s,e,o,n=t.touches?t.touches[0]:t,r=h.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,i=n.pageX-this.lastPointX,this.lastPointX=n.pageX,s=n.pageY-this.lastPointY,this.lastPointY=n.pageY,e=this.x+i,o=this.y+s,this._pos(e,o),1==this.scroller.options.probeType&&r-this.startTime>300?(this.startTime=r,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),t.preventDefault(),t.stopPropagation()},_end:function(i){if(this.initiated){if(this.initiated=!1,i.preventDefault(),i.stopPropagation(),h.removeEvent(t,"touchmove",this),h.removeEvent(t,"MSPointerMove",this),h.removeEvent(t,"mousemove",this),this.scroller.options.snap){var e=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),o=this.options.snapSpeed||s.max(s.max(s.min(s.abs(this.scroller.x-e.x),1e3),s.min(s.abs(this.scroller.y-e.y),1e3)),300);(this.scroller.x!=e.x||this.scroller.y!=e.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=e,this.scroller.scrollTo(e.x,e.y,o,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[h.style.transitionDuration]=t+"ms",!t&&h.isBadAndroid&&(this.indicatorStyle[h.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[h.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(h.addClass(this.wrapper,"iScrollBothScrollbars"),h.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(h.removeClass(this.wrapper,"iScrollBothScrollbars"),h.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=s.max(s.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=s.max(s.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=s.round(this.sizeRatioX*this.scroller.x)||0,i=s.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(0>t?t=0:t>this.maxPosX&&(t=this.maxPosX),0>i?i=0:i>this.maxPosY&&(i=this.maxPosY)),this.x=t,this.y=i,this.scroller.options.useTransform?this.indicatorStyle[h.style.transform]="translate("+t+"px,"+i+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=i+"px")},_pos:function(t,i){0>t?t=0:t>this.maxPosX&&(t=this.maxPosX),0>i?i=0:i>this.maxPosY&&(i=this.maxPosY),t=this.options.listenX?s.round(t/this.sizeRatioX):this.scroller.x,i=this.options.listenY?s.round(i/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,i)}},e.ease=h.ease,e}(window,document,Math);s.exports=e},{main:!0});

!function(){function e(e,t){for(var n in t)e[n]=t[n];return e}var t="env@~0.1.0",n="logger@0.1.9/module/control.js",o="logger@0.1.9/module/data.js",r="logger@0.1.9/module/server.js",i="logger@0.1.9/module/send.js",a="logger@0.1.9/module/store.js",c="logger@0.1.9/util/tool.js",l="logger@0.1.9/module/level.js",s="load-event@~0.1.0",u="logger@0.1.9/index.js",f={},p=f;define(u,[t,n,o,r,i,a,c,l],function(e,t,n,o,r){function i(e,t){var n=this;n.type=t=t||"cat",n.getDate=new u(e),n.store=m,n.serverUrl=f[t],n.storeId=v+t,n._bindControl()}function a(e){this.core=new i(e,"cat")}function c(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null}function l(e){this.core=new i(e,"log")}var s=e("./module/control"),u=e("./module/data"),f=e("./module/server"),p=e("./module/send"),m=e("./module/store"),d=e("./util/tool"),v="logger~~",g=e("./module/level"),h=e("env");i.prototype.send=function(){var e=this,t=e.store,n=e.type,o=t.fetch(e.storeId);o&&p[n]({url:e.serverUrl,data:o})},i.prototype._bindControl=function(){var e=this,t=e.type;e.store;s.load(function(){e.send()}),"log"==t&&s.lazy(function(){e.send()})},i.prototype["do"]=function(e){var t=this,n=t.type,o=t.getDate,r=t.store,e=o[n](e);r.insert(v+n,e),"cat"==n&&t.send()},g.forEach(function(e){a.prototype[e]=function(t,n){if(n=n||{},d.isFunction(t))try{t()}catch(o){throw"game over"!=o&&this.core["do"]({message:(n.prefix||"")+o.message,level:e.toLocaleUpperCase(),param:n.param||""}),"game over"}else this.core["do"](d.extend({message:t,param:n.param||""},{level:e.toLocaleUpperCase()}))}}),a.prototype.listener=function(){var e=this.core;s.error(function(t){e.store.insert(e.storeId,e.getDate[e.type]({message:"系统报错："+(t[0]||""),column:t[3]||0,line:t[2]||0,level:"ERROR"})),e.send()})},["info","warn"].forEach(function(e){l.prototype[e]=function(t){var n;(n=(c("dper")||"").replace(/(.{10})(.{1})/g,"$1"))||(n=location.href+",platform~"+h.platform.name+",system~"+h.system.name),this.core["do"](d.extend({message:t,dper:n},{level:e.toLocaleUpperCase()}))}}),n.exports={Cat:a,Log:l}},{main:!0,map:e({"./module/control":n,"./module/data":o,"./module/server":r,"./module/send":i,"./module/store":a,"./util/tool":c,"./module/level":l},p)}),define(n,[s,c],function(e,t,n,o,r){var i=["error","lazy","load"],a={},c=e("../util/tool"),l=e("load-event");i.forEach(function(e){var t;switch(e){case"error":t=a[e]=function(){return window.onerror=function(){var e=Array.prototype.slice.call(arguments);t.store.forEach(function(t){c.isFunction(t)&&t(e)})},function(e){t.store.push(e)}}();break;case"load":t=a[e]=function(){return l(function(){setTimeout(function(){t.store.forEach(function(e){c.isFunction(e)&&e()})},2e3)}),function(e){t.store.push(e)}}();break;case"lazy":t=a[e]=function(){return setInterval(function(){t.store.forEach(function(e){c.isFunction(e)&&e()})},1e4),function(e){t.store.push(e)}}()}t.store=[]}),n.exports=a},{map:e({"../util/tool":c},p)}),define(o,[t,l],function(e,t,n,o,r){function i(e){var t=s.exec(e.appname||"")||["","",""];this.appname=t[1],this.version=t[2],this.filename=e.filename?e.filename.match(/[^\/\\]+\..+$/)&&e.filename.match(/[^\/\\]+\..+$/)[0]:""}var a=e("./level"),c=e("env"),l=c.system.name+c.system.version+c.platform.name+c.platform.version,s=/^((?:[^\/])+?)(?:@([^\/]+))?(\/.*)?$/;i.prototype={cat:function(e){var t=this;return{n:t.appname,l:e.level&&-1!=a.indexOf(e.level.toLocaleLowerCase())?e.level:"WARN",msg:e.message||"",t:+new Date,a:l,v:1,data:encodeURIComponent(JSON.stringify({url:location.href,line:e.line||"",column:e.column||"",filename:t.filename,version:t.version,param:e.param||"",ua:navigator.userAgent}))}},log:function(e){var t=this;return[+new Date,e.level,e.dper,t.appname,location.href,e.message||""]}},n.exports=i},{map:e({"./level":l},p)}),define(r,[],function(e,t,n,o,r){n.exports={log:"//webcatdot.dianping.com/web-broker-service/api/log",cat:"//webcatdot.dianping.com/web-broker-service/api/js"}},{map:p}),define(i,[c],function(e,t,n,o,r){function i(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}function a(e){e=e||{},e.type="POST",e.dataType=e.dataType||"json";var t=e.data,n=[];if(t.split("~~").forEach(function(e){var t=JSON.parse(e);n.push(t.join("	"))}),window.XMLHttpRequest)var o=new XMLHttpRequest;else var o=new ActiveXObject("Microsoft.XMLHTTP");o.onreadystatechange=function(){4==o.readyState},o.open("POST",e.url,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send("v=1&c="+n.join("\n"))}function c(e){var t=i(JSON.parse(e.data)),n=e.url,o=new Image(1,1);o.src=n+"?"+t}e("../util/tool");n.exports={cat:c,log:a}},{map:e({"../util/tool":c},p)}),define(a,[c],function(e,t,n,o,r){function i(e){return c+e}var a=document,c="-logger-",l=!0,s=e("../util/tool"),u="~~";try{localStorage.setItem("@#####test","1")}catch(f){l=!1}var p={insert:function(e,t){t=s.isString(t)?t:JSON.stringify(t);var n=(this.get(e)?this.get(e)+u:this.get(e))+t;localStorage.setItem(e,n)},get:function(e){var t=localStorage.getItem(e);return t||""},remove:function(e){localStorage.removeItem(e)},fetch:function(e){var t=this.get(e);return this.remove(e),t}},m={get:function(e){e=i(e);var t=a.getElementById(e);return t?t.innerHTML:""},insert:function(e,t){t=s.isString(t)?t:JSON.stringify(t),e=i(e);var n=(this.get(e)?this.get(e)+u:this.get(e))+t,o=a.getElementById(e)?a.getElementById(e):function(){var t=a.createElement("div");t.style.display="none",t.id=e,document.body.appendChild(t)}();o.innerHTML=n},remove:function(e){e=i(e);var t=a.getElementById(e);t&&document.body.removeChild(t)},fetch:function(e){var t=this.get(e);return this.remove(e),t}};n.exports=l?p:m},{map:e({"../util/tool":c},p)}),define(c,[],function(e,t,n,o,r){function i(e){return-1!==Object.prototype.toString.call(e).indexOf("object Function")?!0:!1}function a(e){return-1!==Object.prototype.toString.call(e).indexOf("object Object")?!0:!1}function c(e){return-1!==Object.prototype.toString.call(e).indexOf("object String")?!0:!1}function l(e){return-1!==Object.prototype.toString.call(e).indexOf("object Array")?!0:!1}function s(e){return e%1===0}function u(e){return e%1!==0}function f(e,t,n){if(e=e||{},a(e)&&a(t))for(var o in t)if(n)e[o]=t[o];else{if(e[o]){a(e[o])&&a(t[o])&&f(e[o],t[o]);continue}e[o]=t[o]}return e}function p(e,t){var n=Array.prototype.slice.call(arguments).splice(1);return n.forEach(function(n){if(a(e)&&a(t))for(var o in t)e[o]=t[o]}),e}function m(e){return e?l(e)?e:[e]:[]}n.exports={mix:f,isString:c,isArray:l,isObject:a,isFunction:i,makeArray:m,isInt:s,isFloat:u,extend:p}},{map:p}),define(l,[],function(e,t,n,o,r){n.exports=["error","warn","info","dev"]},{map:p})}();
//# sourceMappingURL=logger.js.map

!function(){function t(t,r){for(var e in r)t[e]=r[e];return t}var r="xss@0.1.0/js/default.js",e="xss@0.1.0/js/parser.js",n="xss@0.1.0/js/xss.js",i="xss@0.1.0/js/util.js",o="xss@0.1.0/index.js",s={},a=s;define(o,[r,e,n],function(t,r,e){function n(t,r){var e=new i(r);return e.process(t)}var i=(t("./js/default"),t("./js/parser"),t("./js/xss"));r=e.exports=n},{main:!0,map:t({"./js/default":r,"./js/parser":e,"./js/xss":n},a)}),define(r,[i],function(t,r){function e(){}function n(){}function i(){}function o(){}function s(t){return t.replace(x,"&lt;").replace(b,"&gt;")}function a(t,r,e){if(e=p(e),"href"===r||"src"===r){if(e=A.trim(e),"#"===e)return"#";if("http://"!==e.substr(0,7)&&"https://"!==e.substr(0,8)&&"mailto:"!==e.substr(0,7)&&"/"!==e[0])return""}else if("background"===r){if(k.lastIndex=0,k.test(e))return""}else if("style"===r){if(S.lastIndex=0,S.test(e))return"";if(B.lastIndex=0,B.test(e))return"";if(E.lastIndex=0,E.test(e)&&(k.lastIndex=0,k.test(e)))return""}return e=d(e)}function l(t){return t.replace(w,"&quot;")}function u(t){return t.replace(j,'"')}function c(t){return t.replace(y,function(t,r){return String.fromCharCode("x"===r[0]||"X"===r[0]?parseInt(r.substr(1),16):parseInt(r,10))})}function f(t){return t.replace(C,":").replace(O," ")}function g(t){for(var r="",e=0,n=t.length;n>e;e++)r+=t.charCodeAt(e)<32?" ":t.charAt(e);return A.trim(r)}function p(t){return t=u(t),t=c(t),t=f(t),t=g(t)}function d(t){return t=l(t),t=s(t)}function h(){return""}function v(t,r){function e(r){return n?!0:-1!==A.indexOf(t,r)}"function"!=typeof r&&(r=function(){});var n=!Array.isArray(t),i=[],o=!1;return{onIgnoreTag:function(t,n,s){if(e(t)){if(s.isClosing){var a="[/removed]",l=s.position+a.length;return i.push([o!==!1?o:s.position,l]),o=!1,a}return o||(o=s.position),"[removed]"}return r(t,n,s)},remove:function(t){var r="",e=0;return A.forEach(i,function(n){r+=t.slice(e,n[0]),e=n[1]}),r+=t.slice(e)}}}function m(t){return t.replace(H,"")}function T(t){var r=t.split("");return r=r.filter(function(t){var r=t.charCodeAt(0);return 127===r?!1:31>=r?10===r||13===r?!0:!1:!0}),r.join("")}var A=t("./util"),I={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","colspan","align","valign"],tfoot:["align","valign"],th:["width","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},x=/</g,b=/>/g,w=/"/g,j=/&quot;/g,y=/&#([a-zA-Z0-9]*);?/gim,C=/&colon;?/gim,O=/&newline;?/gim,S=/\/\*|\*\//gm,k=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,B=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,E=/u\s*r\s*l\s*\(.*/gi,H=/<!--[\s\S]*?-->/g;r.whiteList=I,r.onTag=e,r.onIgnoreTag=n,r.onTagAttr=i,r.onIgnoreTagAttr=o,r.safeAttrValue=a,r.escapeHtml=s,r.escapeQuote=l,r.unescapeQuote=u,r.escapeHtmlEntities=c,r.escapeDangerHtml5Entities=f,r.clearNonPrintableCharacter=g,r.friendlyAttrValue=p,r.escapeAttrValue=d,r.onIgnoreTagStripAll=h,r.StripTagBody=v,r.stripCommentTag=m,r.stripBlankChar=T},{map:t({"./util":i},a)}),define(e,[i],function(t,r){function e(t){var r=t.indexOf(" ");if(-1===r)var e=t.slice(1,-1);else var e=t.slice(1,r+1);return e=s.trim(e).toLowerCase(),"/"===e[0]&&(e=e.slice(1)),"/"===e[e.length-1]&&(e=e.slice(0,-1)),e}function n(t){return"</"===t.slice(0,2)}function i(t,r,i){"user strict";var o="",s=0,a=!1,l=!1,u=0,c=t.length,f="",g="";for(u=0;c>u;u++){var p=t.charAt(u);if(a===!1){if("<"===p){a=u;continue}}else if(l===!1){if("<"===p){o+=i(t.slice(s,u)),a=u,s=u;continue}if(">"===p){o+=i(t.slice(s,a)),f=t.slice(a,u+1),g=e(f),o+=r(a,o.length,g,f,n(f)),s=u+1,a=!1;continue}if('"'===p||"'"===p){l=p;continue}}else if(p===l){l=!1;continue}}return s<t.length&&(o+=i(t.substr(s))),o}function o(t,r){"user strict";function e(t,e){t=s.trim(t),t=t.replace(a,"").toLowerCase(),t.length<1||i.push(r(t,e||""))}for(var n=0,i=[],o=!1,l=t.length,u=0;l>u;u++){var c,f=t.charAt(u);if(o!==!1||"="!==f)if(o===!1||u!==n||'"'!==f&&"'"!==f)" "!==f||(c=s.trim(t.slice(n,u)),o===!1?e(c):e(o,c),o=!1,n=u+1);else{var g=t.indexOf(f,u+1);if(-1===g)break;c=s.trim(t.slice(n+1,g)),e(o,c),o=!1,u=g,n=u+1}else o=t.slice(n,u),n=u+1}return n<t.length&&(o===!1?e(t.slice(n)):e(o,t.slice(n))),s.trim(i.join(" "))}var s=t("./util"),a=/[^a-zA-Z0-9_:\.\-]/gim;r.parseTag=i,r.parseAttr=o},{map:t({"./util":i},a)}),define(n,[r,e,i],function(t,r,e){function n(t){return void 0===t||null===t}function i(t){var r=t.indexOf(" ");if(-1===r)return{html:"",closing:"/"===t[t.length-2]};t=c.trim(t.slice(r+1,-1));var e="/"===t[t.length-1];return e&&(t=c.trim(t.slice(0,-1))),{html:t,closing:e}}function o(t){t=t||{},t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=s.onIgnoreTagStripAll),t.whiteList=t.whiteList||s.whiteList,t.onTag=t.onTag||s.onTag,t.onTagAttr=t.onTagAttr||s.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||s.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||s.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||s.safeAttrValue,t.escapeHtml=t.escapeHtml||s.escapeHtml,this.options=t}var s=t("./default"),a=t("./parser"),l=a.parseTag,u=a.parseAttr,c=t("./util");o.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var r=this,e=r.options,o=e.whiteList,a=e.onTag,f=e.onIgnoreTag,g=e.onTagAttr,p=e.onIgnoreTagAttr,d=e.safeAttrValue,h=e.escapeHtml;if(e.stripBlankChar&&(t=s.stripBlankChar(t)),e.allowCommentTag||(t=s.stripCommentTag(t)),e.stripIgnoreTagBody){var v=s.StripTagBody(e.stripIgnoreTagBody,f);f=v.onIgnoreTag}else v=!1;var m=l(t,function(t,r,e,s,l){var v={sourcePosition:t,position:r,isClosing:l,isWhite:e in o},m=a(e,s,v);if(!n(m))return m;if(v.isWhite){if(v.isClosing)return"</"+e+">";var T=i(s),A=o[e],I=u(T.html,function(t,r){var i=-1!==c.indexOf(A,t),o=g(e,t,r,i);if(!n(o))return o;if(i)return r=d(e,t,r),r?t+'="'+r+'"':t;var o=p(e,t,r,i);return n(o)?void 0:o}),s="<"+e;return I&&(s+=" "+I),T.closing&&(s+=" /"),s+=">"}var m=f(e,s,v);return n(m)?h(s):m},h);return v&&(m=v.remove(m)),m},e.exports=o},{map:t({"./default":r,"./parser":e,"./util":i},a)}),define(i,[],function(t,r,e){e.exports={indexOf:function(t,r){var e,n;if(Array.prototype.indexOf)return t.indexOf(r);for(e=0,n=t.length;n>e;e++)if(t[e]===r)return e;return-1},forEach:function(t,r,e){var n,i;if(Array.prototype.forEach)return t.forEach(r,e);for(n=0,i=t.length;i>n;n++)r.call(e,t[n],n,t)},trim:function(t){return String.prototype.forEach?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")}}},{map:a})}();

!function(){function t(t,n){for(var o in n)t[o]=n[o];return t}var n="whereami@~0.2.0",o="mobile-common@0.2.9/js/locate.js",i="mobile-common@0.2.9/js/lazyload.js",e="mobile-common@0.2.9/js/util.js",c="cookie@~0.1.0",r="zepto@^1.2.1",a="mobile-common@0.2.9/index.js",u={},f=u;define(a,[n,o,i,e],function(t,n,o,i,e){var c=t("whereami");c.config({wxAutoConfig:!0,debug:!1}),n.Geo=t("whereami"),n.Locate=t("./js/locate"),n.LazyLoad=t("./js/lazyload"),n.Util=t("./js/util")},{main:!0,map:t({"./js/locate":o,"./js/lazyload":i,"./js/util":e},f)}),define(o,[c,r,n],function(t,n,o,i,e){var c=t("cookie"),r=t("zepto"),a=t("whereami"),u=-1!=location.href.indexOf("51ping.com")?".51ping.com":".dianping.com",f=function(t){return{expires:t||.25/24,path:"/",domain:u}};o.exports=function(t,n,o){function i(t,n){a.config({city:!0}),a(function(n){t(n.city)},n,o)}function e(){if(!c("switchcityflashtoast")){var t=r("#J_toast");t.removeClass("Hide"),setTimeout(function(){t.addClass("Hide")},3e3),c("switchcityflashtoast","1",f(365))}}var u=c("cityid")||t,l=function(t,o,i){t!=u?c("diffcity","1",f()):c("diffcity","2",f()),!c("noswitchcity")&&u&&t&&t!=u&&o&&i&&(confirm("您目前定位是在:"+o+",是否切换?")?setTimeout(function(){document.location.href=n?n(t,i,o):"/"+i},200):c("noswitchcity","1",f()))},s=function(t){var n=t.cityid,o=t.citypinyin,i=t.cityname;l(n,i,o)},m=function(){e()};i(s,m)}},{map:f}),define(i,[],function(t,n,o,i,e){function c(t,n){return t.getAttribute(n)}function r(t){return t.filter(function(t){return!!c(t,a)})}var a="lazy-src",u=function(t){var n=r(t.get()),o=function(){n.forEach(function(t,n){var o=t.getBoundingClientRect().top,i=c(t,a);i&&o&&o<window.innerHeight&&(t.setAttribute("src",i),t.removeAttribute(a))}),n=r(n),n.length<=0&&window.removeEventListener("scroll",o,!1)};window.addEventListener("load",o,!1),window.addEventListener("scroll",o,!1),o()};o.exports=u},{map:f}),define(e,[],function(t,n,o,i,e){n.extend=function(t,n){if(n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);return t}},n.supportLocalStorage=function(){var t=window.localStorage&&null!=window.localStorage,n="local_test";if(t)try{localStorage.setItem(n,1),localStorage.removeItem(n)}catch(o){return!1}return t},n.supportGeo=function(){return!!navigator.geolocation},n.tpl=function(t,n){return t.replace(/{([^{}]*)}/g,function(t,o){return o in n?n[o]:""})}},{map:f})}();
//# sourceMappingURL=mobile-common.js.map

!function(){var e="zepto@^1.2.1",o="wepp-module-overlay@~0.3.0",i="wepp-module-toast@0.4.2/index.js",n={},d=n;define(i,[e,o],function(e,o,i){function n(e,o,i){o=o||t;var n={position:"fixed","z-index":p,top:"50%",left:"50%","min-width":"100px","max-width":"160px",padding:"10px","border-radius":"5px","-webkit-border-radius":"5px",background:"#000",color:"#fff","text-align":"center","font-size":"14px","word-break":"break-all","-webkit-box-sizing":"border-box","box-sizing":"border-box"},r=d("<div>"+e+"</div>");r.css(n).appendTo("body").css("margin","-"+r.height()/2+"px 0 0 -"+r.width()/2+"px"),a.show(),a.once("hide",function(){r.remove(),i&&i(),clearTimeout(x)});var x=setTimeout(function(){a.hide()},o)}var d=e("zepto"),r=e("wepp-module-overlay"),t=2e3,p=10000002,a=new r(p-1);i.exports=n},{main:!0,map:d})}();

!function(){function e(e,n){for(var t in n)e[t]=n[t];return e}var n="easy-login@0.4.8/lib/shim.js",t="easy-login@0.4.8/lib/type_factory.js",i="easy-login@0.4.8/lib/extend.js",a="easy-login@0.4.8/lib/event.js",o="easy-login@0.4.8/lib/mobile/cap_pop.js",r="easy-login@0.4.8/lib/type/mobile.js",c="easy-login@0.4.8/lib/type/account.js",l="easy-login@0.4.8/lib/type/iframe.js",s="easy-login@0.4.8/lib/request.js",u="easy-login@0.4.8/lib/addevent.js",d="easy-login@0.4.8/lib/config.js",p="easy-login@0.4.8/lib/mobile/countrycode.js",m="easy-login@0.4.8/lib/login.js",f="easy-login@0.4.8/lib/domain.js",g="easy-login@0.4.8/lib/field.js",v="easy-login@0.4.8/lib/validate.js",h="easy-login@0.4.8/lib/api.js",y={},b=y;define(h,[n,t,i,a,o],function(e,n,t,i,a){e("./shim");var o=e("./type_factory"),r=e("./extend"),c=e("./event"),l=e("./mobile/cap_pop"),s="mobile",u=function(e,n,t,i){for(var a=[],r=0;r<n.length;r++)a.push(o.create(e+":"+n[r],t,i));return a},d=function(e){return"string"==typeof e?e.split(","):e},p=function(e,n,t,i){i.types.length&&(e.active=t[0].loginer,n.appendChild(t[0].container))},m=function(e,n){for(var t=0;t<n.length;t++){var i=n[t].loginer;["login","logining","error","info"].forEach(function(n){i.on(n,function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(n),e.emit.apply(e,t)})})}},f=function(e,n){var t={platform:s,types:"phone",channel:"",defaultMobile:"",showCountryCode:!0,autoSend:!1,messageType:304,wide:!0,redir:"",mobileAutoLogin:!1,env:"",formData:{}},i=r({active:null,login:function(){this.active.login()}},c),a=r(t,n||{}),o=a.types=d(a.types),l=u(a.platform,o,a.channel,a);return p(i,e,l,a),m(i,l),i};t.exports=f,f.CapPop=l},{main:!0,map:e({"./shim":n,"./type_factory":t,"./extend":i,"./event":a,"./mobile/cap_pop":o},b)}),define(n,[],function(e,n,t,i,a){Array.prototype.forEach||(Array.prototype.forEach=function(e,n){var t;if("function"!=typeof e)throw new TypeError(e+" is not a function");arguments.length>1&&(t=n);for(var i=0;i<this.length;i++)e.call(t,this[i],i,this)})},{map:b}),define(t,[r,c,l],function(e,n,t,i,a){n.create=function(n,t,i){i=i||{};var a,o=document.createElement("div");switch(n){case"mobile:phone":a=e("./type/mobile").create(o,t,i);break;case"mobile:account":a=e("./type/account").create(o,t,i);break;case"pc:phone":a=e("./type/iframe").create(o,t,i);break;case"pc:account":a=e("./type/iframe").create(o,t,i);break;case"pc:reg":a=e("./type/iframe").create(o,t,i,!0)}return{loginer:a,container:o}}},{map:e({"./type/mobile":r,"./type/account":c,"./type/iframe":l},b)}),define(i,[],function(e,n,t,i,a){t.exports=function(e,n){if(n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}},{map:b}),define(a,[],function(e,n,t,i,a){var o={on:function(e,n){if(e){this._events_||(this._events_={});var t=this._events_;t[e]||(t[e]=[]),t[e].push(n)}},emit:function(e){var n=this._events_;if(e&&n&&n[e])for(var t=n[e],i=t.length,a=Array.prototype.slice.call(arguments,1),o=0;i>o;o++)t[o].apply(this,a)}};t.exports=o},{map:b}),define(o,[s,u,d,i],function(e,n,t,i,a){var o=e("./../request"),r=e("./../addevent"),c=e("./../config"),l=e("../extend"),s='<div class="EasyLogin_Title">请输入验证码</div><div class="EasyLogin_Cap"><input type="text"  /><img  /></div><div class="EasyLogin_Mobile_Msg" style="display: none;"></div><a class="EasyLogin_Mobile_Btn" href="javascript:void(0);">确定</a>';t.exports=function(e,n,t){var i,a,p={captchaChannel:0};"function"==typeof e?(i=e,a=n):(l(p,e),i=n,a=t);var m=document.createElement("div");m.className="EasyLogin_Mobile_Overlay";var f=document.createElement("div");f.className="EasyLogin_Mobile_ImgPop",f.innerHTML=s;var g,v=document.body,h=f.getElementsByTagName("input")[0],y=f.getElementsByTagName("img")[0],b=f.getElementsByClassName("EasyLogin_Mobile_Msg")[0],_=!1,E=function(){v.appendChild(m),v.appendChild(f),_=!0},w=function(){_&&(v.removeChild(m),v.removeChild(f))},x=function(e){b.innerHTML=e,b.style.display="block"},L=function(e){w(),i(e)},j=function(e){o({url:c.cap.load,onSuc:function(n){200==n.code?(y.src=n.msg.url,g=n.msg.signature,e&&e()):n.msg&&n.msg.uuid?L(n.msg.uuid):n.msg&&n.msg.err&&alert(n.msg.err)}})},M=function(e,n){r(n,"click",function(e){setTimeout(function(){w(),a&&a()},300)}),r(y,"click",j),r(e.getElementsByTagName("a")[0],"click",function(){x("正在提交验证...");var e=h.value.trim();e?u({vcode:e,signature:g},function(e,n){e?(w(),i(n)):x(n)}):x("请输入验证码")})};d(p,function(e,n){e?(M(f,m),j(E)):i(n)})};var u=function(e,n){o({url:c.cap.check,data:e,onSuc:function(e){200==e.code?n(!0,e.msg.uuid):n(!1,e.msg.err)}})},d=function(e,n){var t=e.captchaChannel;delete e.captchaChannel,o({url:c.cap.appear,data:{captchaChannel:t,params:encodeURIComponent(JSON.stringify(e))},onSuc:function(e){e&&200==e.code&&e.msg&&0==e.msg.isShow&&e.msg.uuid?n(!1,e.msg.uuid):n(!0)}})}},{map:e({"./../request":s,"./../addevent":u,"./../config":d,"../extend":i},b)}),define(r,[u,d,s,o,p,m],function(e,n,t,i,a){var o=e("../addevent"),r=e("../config"),c=e("../request"),l=e("../mobile/cap_pop"),s=e("../mobile/countrycode");n.create=function(n,t,i){r=r["mobile"+(i.env?"_"+i.env:"")];var a,u,d,p,m,f,g=i.messageType||304,v=e("../login")();v.getUrl=function(){return r.login};var h=function(){var e=f?f.getAttribute("data-code"):"86",n=u.value.trim();return"86"==e?n:e+"_"+n},y=function(){var e='<div class="EasyLogin_row"><div class="EasyLogin_Mobile_tit EasyLogin_Mobile_Country"><span class="EasyLogin-country-code" data-code="86">86</span><div class="EasyLogin_Mobile_Arrow"></div></iv></div><input type="text" name="mobile" placeholder="请输入手机号" /><a class="J_send EasyLogin_send" href="javascript:;">发送验证码</a></div><div class="EasyLogin_row"><div class="EasyLogin_Mobile_tit">验证码</div><input type="text" name="vcode" placeholder="请输入验证码" /><input type="hidden" value="'+t+'" name="channel" /><input type="hidden" value="'+g+'" name="type" /></div>';a=document.createElement("div"),a.className="EasyLogin_Mobile_Mobile",a.innerHTML=e,n.appendChild(a);var r=a.getElementsByTagName("input");if(u=r[0],d=r[1],p=r[2],m=r[3],f=a.getElementsByClassName("EasyLogin-country-code")[0],i.showCountryCode||(f.parentNode.className="EasyLogin_Mobile_tit",f.parentNode.innerHTML="手机号",f=null),i&&i.defaultMobile&&(u.value=i.defaultMobile),i&&i.mobileAutoLogin){var c=null;o(d,"input",function(){var e=d.value;e&&6==e.length&&e!=c&&v.login(),c=e})}},b=function(){var e=!1,n=a.getElementsByTagName("a")[0];f&&s.create(f);var t=function(){if(!e){var t=v.fields[0].check();if(!t.pass)return void v.emit("error",t.msg);e=!0,l({mobile:h(),captchaChannel:102},function(t){c({url:r.send,data:{mobileNo:h(),mobile:h(),uuid:t,type:g},onSuc:function(t){_(n,function(){e=!1}),200===t.code?v.emit("info",t.msg.info):v.emit("error",t.msg.err)}})},function(){e=!1})}};o(n,"click",t),i.autoSend&&t()},_=function(e,n){var t=60;e.className=e.className+" sending";var i=setInterval(function(){t>1?(e.innerHTML="重新发送("+t+")",t--):(clearInterval(i),e.innerHTML="发送验证码",e.className=e.className.replace("sending",""),n())},1e3)};return y(),v.init(),v.setForm([{input:u,validator:/^(\d+_\d+)|(1\d{10})$/,msg:"请输入正确的手机号",getValue:h,condition:function(){return h().length<=16}},{input:d,validator:/^\d+$/,msg:"请输入正确的验证码"},{input:p,validator:/^[\w\W]+$/,msg:"无效的渠道号"},{input:m,validator:/\d+/,msg:"无效的短信类型"}],i.formData),b(),v}},{map:e({"../addevent":u,"../config":d,"../request":s,"../mobile/cap_pop":o,"../mobile/countrycode":p,"../login":m},b)}),define(c,[d,o,m],function(e,n,t,i,a){var o=e("../config"),r=e("../mobile/cap_pop");n.create=function(n,t,i){var a,c,l,s,u=function(){var e='<div class="EasyLogin_row"><input type="text" name="username" placeholder="手机号/邮箱/用户名" /></div><div class="EasyLogin_row"><input type="password" name="password" placeholder="密码" /></div>';a=document.createElement("div"),a.className="EasyLogin_Mobile_Account",a.innerHTML=e,n.appendChild(a)},d=function(){var e=a.getElementsByTagName("input");c=e[0],l=e[1]},p=e("../login")();p.getUrl=function(){return o.account.login},u(),d(),p.init(),p.setForm([{input:c,validator:/^[\w\W]{1,}$/,msg:"请输入手机号/用户名/邮箱",encode:!0},{input:l,validator:/^[\w\W]{1,}$/,msg:"请输入密码",encode:!0}]),p.beforeLogin=function(e){r({captchaChannel:101,username:c.value},function(n){s=n,e()})};var m=p.getData;return p.getData=function(){var e=m.call(p);return e.uuid=s,e},p}},{map:e({"../config":d,"../mobile/cap_pop":o,"../login":m},b)}),define(l,[d,f,m],function(e,n,t,i,a){var o=e("../config"),r=0,c=e("../domain");n.create=function(n,t,i,a){var l=e("../login")();l.login=function(){};var s=540,u=260;i.wide||(s=290,u=300);var d="EasyLogin_frame_callback"+r++;try{document.domain=c.rootDomain(location.hostname)}catch(p){}var m=document.createElement("iframe"),f=a?o.frame.regUrl:o.frame.url;m.src=f+"?callback="+d+"&wide="+!!i.wide+"&redir="+encodeURIComponent(i.redir||""),m.width=s,m.height=u,m.frameBorder="0",m.scrolling="no",n.appendChild(m);var g={frameHeight:function(e){m.height=e},login:function(){l.emit("login"),i.redir&&(location.href=i.redir)}};return window[d]=function(e){g[e]&&g[e].apply(g,Array.prototype.slice.call(arguments,1))},l}},{map:e({"../config":d,"../domain":f,"../login":m},b)}),define(s,[],function(e,n,t,i,a){var o=0,r=function(e,n){if(!n)return e;var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i+"="+n[i]);return~e.indexOf("?")?e+t.join("&"):e+"?"+t.join("&")};t.exports=function(e){if(!e.url)throw new Error("url request!");var n=e.data||{},t=e.onSuc||function(){},i=n.callback="EasyLoginCallBack"+ ++o,a=document.createElement("script");a.src=r(e.url,n),window[i]=function(e){delete window[i],a.parentNode.removeChild(a),t(e)},document.getElementsByTagName("head")[0].appendChild(a)}},{map:b}),define(u,[],function(e,n,t,i,a){t.exports=function(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent?e.attachEvent("on"+n,t):e["on"+n]=t}},{map:b}),define(d,[f],function(e,n,t,i,a){var o=e("./domain"),r="undefined"!=typeof location?location.hostname:"",c=o.requestHost(r),l=o.requestHost(r,!0);t.exports={mobile:{send:c+"/account/ajax/mobileVerifySend",login:c+"/account/ajax/mfastlogin"},mobile_wx:{send:c+"/ajax/json/account/mobiledynamiclogincode/2",login:c+"/ajax/json/account/mobiledynamiclogin/98"},mobile_qq:{send:c+"/ajax/json/account/mobiledynamiclogincode/2",login:c+"/ajax/json/account/mobiledynamiclogin/98"},account:{login:c+"/account/ajax/passwordLogin"},cap:{load:l+"/account/ajax/getCaptcha",check:l+"/account/ajax/checkCaptcha",appear:c+"/account/ajax/captchaShow"},countrycode:{url:c+"/login/choosecountry?redirect="},frame:{url:l+"/account/iframeLogin",regUrl:l+"/account/iframeRegister"}}},{map:e({"./domain":f},b)}),define(p,[d,u],function(e,n,t,i,a){var o=e("../config"),r=e("../addevent");n.create=function(e){var n,t,i=location.href.match(/countrycode=([^&$]+)/);i&&(n=i[1]);try{t=localStorage.getItem("country-code")}catch(a){}(n||t)&&(e.innerHTML=n||t,e.setAttribute("data-code",n||t)),r(e.parentNode,"click",function(){location.href=o.countrycode.url+encodeURIComponent(location.href)})}},{map:e({"../config":d,"../addevent":u},b)}),define(m,[a,i,s,g],function(e,n,t,i,a){var o=e("./event"),r=e("./extend"),c=e("./request"),l=e("./field"),s={init:function(){this.fields=[]},setForm:function(e,n){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("fields should be an array");e.forEach(function(e){t.fields.push(l.create(e))}),this.formData=n},check:function(e){for(var n=0,t=this.fields.length;t>n;n++){var i=this.fields[n].check();if(!i.pass)return void this.emit("error",i.msg)}e()},beforeLogin:function(e){e()},login:function(){var e=this;e.check(function(){e.beforeLogin(function(){if(!e.isSubmitting){e.isSubmitting=!0;var n=setTimeout(function(){e.isSubmitting=!1},3e3);e.emit("logining"),c({url:e.getUrl(),data:e.getData(),onSuc:function(t){e.isSubmitting=!1,clearTimeout(n),200===t.code?e.emit("login"):e.emit("error",t.msg.err)}})}})})},getUrl:function(){},getData:function(){var e={};return this.fields.forEach(function(n){e[n.input.getAttribute("name")]=n.valueGetter()}),r(e,this.formData)},isSubmitting:!1};r(s,o),t.exports=function(){return r({},s)}},{map:e({"./event":a,"./extend":i,"./request":s,"./field":g},b)}),define(f,[],function(e,n,t,i,a){var o=function(e){return~e.indexOf("alpha.dp")?"alpha":~e.indexOf("51ping.com")?"beta":0==e.indexOf("ppe.")?"ppe":~e.indexOf("dianping.com")?"online":"beta"};n.rootDomain=function(e){var n=o(e),t={alpha:"alpha.dp",beta:"51ping.com",ppe:"dianping.com",online:"dianping.com"};return t[n]},n.requestHost=function(e,n){var t={m:{alpha:"m.alpha.dp",beta:"m.51ping.com",ppe:"ppe.m.dianping.com",online:"m.dianping.com"},pc:{alpha:"w.alpha.dp",beta:"w.51ping.com",ppe:"ppe.www.dianping.com",online:"www.dianping.com"}};return"//"+t[n?"pc":"m"][o(e)]}},{map:b}),define(g,[v],function(e,n,t,i,a){var o=e("./validate");n.create=function(e){var n={input:e.input,validator:new o(e.validator,e.msg),valueGetter:e.getValue||function(){var n=e.input.value;return e.encode?encodeURIComponent(n):n},check:function(){return this.validator.setValue(this.valueGetter()),{pass:this.validator.match(),msg:this.validator.msg}}};return e.condition&&(n.validator.preMatch=e.condition),n}},{map:e({"./validate":v},b)}),define(v,[a,i],function(e,n,t,i,a){var o=e("./event"),r=e("./extend"),c=function(e,n){void 0!==e&&this.setMatcher(e),void 0!==n&&this.setMsg(n)};c.prototype={constructor:c,setMatcher:function(e){if("[object RegExp]"!==Object.prototype.toString.call(e))throw new Error("matcher must be regexp");this.matcher=e},setValue:function(e){this.value=e},setMsg:function(e){this.msg=e},match:function(){return this.preMatch()?this.matcher?this.matcher.test(this.value):!0:!1},preMatch:function(){return!0}},r(c.prototype,o),t.exports=c},{map:e({"./event":a,"./extend":i},b)})}();
//# sourceMappingURL=easy-login.js.map

!function(){var e="zepto@^1.2.1",o="wepp-module-overlay@~0.3.0",i="wepp-module-toast@0.3.0/index.js",n={},d=n;define(i,[e,o],function(e,o,i){function n(e,o){o=o||t;var i={position:"fixed","z-index":p,top:"50%",left:"50%","min-width":"100px","max-width":"160px",padding:"10px","border-radius":"5px","-webkit-border-radius":"5px",background:"#000",color:"#fff","text-align":"center","font-size":"14px","word-break":"break-all","-webkit-box-sizing":"border-box","box-sizing":"border-box"},n=d("<div>"+e+"</div>");n.css(i).appendTo("body").css("margin","-"+n.height()/2+"px 0 0 -"+n.width()/2+"px"),a.show(),a.once("hide",function(){n.remove(),clearTimeout(r)});var r=setTimeout(function(){a.hide()},o)}var d=e("zepto"),r=e("wepp-module-overlay"),t=2e3,p=1e4,a=new r(p-1);i.exports=n},{main:!0,map:d})}();

!function(){var t="base-op-url@1.1.3/dest/cortex.js",r={},e=r;define(t,[],function(t,r,e){"use strict";function i(t,r,e){for(var i in r)if(e)t[i]=r[i];else{if(t[i])continue;t[i]=r[i]}return t}function n(t){return-1!==Object.prototype.toString.call(t).indexOf("object Object")?!0:!1}function a(t){if(!t)return{};for(var r=t.split(s),e={},i=r.length;--i+1;){var n=r[i].split(o);n[0]&&(e[n[0]]=n[1])}return e}function h(t){if(!n(t))return"";var r=[];for(var e in t)r.push(e+o+t[e]);return r.join(s)}function u(t){var r=this;return r.originUrl=r.url=t+""||"",["hashValue","originValue","searchValue","pathValue"].forEach(function(t){Object.defineProperty(r,t,{set:function(e){r["_"+t]=e,r._build()},get:function(){return r["_"+t]}})}),r._parse(),this}var s="&",o="=",c="#",p="?",l=/(^(?:(?:http|https)\:\/\/)?[^\/^\?^#]+)([^\?^#]+)?(\?[^#]+)?(#.+)?/;u.prototype.search=function(t,r){var e=this,a=e._searchObj;return t?n(t)?(i(a,t,!0),e.searchValue=p+h(a),e):t===!0?e._searchObj:t&&void 0===r?a[t]||"":(a[t]=r||"",e.searchValue=p+h(a),this):e._searchValue},u.prototype.hash=function(t){return t?(this.hashValue=c+t,this):this._hashValue},u.prototype.origin=function(t){return t?(this.originValue=t,this):this._originValue},u.prototype.path=function(t){return t?(this.pathValue=t,this):this._pathValue},u.prototype._parse=function(){var t=this,r=t.url,e=r.match(l);e&&i(t,{originValue:e[1]||"",pathValue:e[2]||"",searchValue:e[3]||"",hashValue:e[4]||""},!0),t._searchObj=e?a((e[3]||"").replace(p,"")):{}},u.prototype._build=function(){return this.url=this.origin()+this.path()+this.search()+this.hash()},u.prototype.getHash=function(t){var r=a(this._hashValue.replace("#",""));return t?r[t]||"":r},u.prototype.setHash=function(t,r){var e=a(this._hashValue.replace("#",""));return e[t]=r,this.hashValue=c+h(e),this},u.prototype.value=function(){return this.url},e.exports=u},{main:!0,map:e})}();

!function(){var e="zepto@^1.2.1",n="wepp-module-overlay@~0.3.0",s="iscroll@~5.0.10",o="list-nav@1.0.0/index.js",i={},t=i;define(o,[e,n,s],function(e,n,s){var o=e("zepto"),i=e("wepp-module-overlay"),t="Hide",a=e("iscroll"),d=function(e){if(!e)throw"Menu got no param";this.container=e,this.lock=!1,this._init()};d.prototype._init=function(){var e=this.triggers=this.container.find(".J_trigger"),n=this.selectors=this.container.find(".J_selector"),s=this;this._initOverlay(),e.each(function(e,i){o(i).on("click",function(i){i.preventDefault();var a=n.eq(e);if(a&&a.length)if(a.hasClass(t)){if(s._openSelector(e),o(a).find(".second-nav").length>0)for(var d=o(a).find(".second-nav .item").length,l=0;d>l;l++)o(a).find(".second-nav .item").eq(l).hasClass("on")||o(a).find(".second-selector").eq(l).addClass("Hide")}else setTimeout(function(){s.ol.hide()},300)})}),n.each(function(e,n){var i=(o(n).find(".sub"),o(n).find(".second-selector").length>1);if(o(n).find(".main").each(function(e,i){o(i).find("p").each(function(e,a){var d=o(a),l=d.parent().find(".sub");l.appendTo(o(i).parent()).css({left:"45%",width:"55%"}),o(n).find(".second-selector").removeClass("Hide"),d.on("click",function(){o(i).parent().find(".sub").addClass(t),o(i).find(".item").removeClass("on"),o(this).addClass("on"),s._showMenu(l)}),a._subItem_=l})}),i){var a=document.createElement("div");o(a).addClass("second-nav"),o(n).prepend(a),o(n).find(".second-selector").each(function(e){var s=document.createElement("div"),i=o(".second-selector").eq(e).attr("data-name");o(s).addClass("item"),o(s).html(i),o(a).append(s),o(n).find(".main").eq(e).find(".on").length>0&&(o(s).addClass("on"),o(n).find(".second-selector").eq(e).removeClass("Hide"))}),o(n).find(".second-nav .item").each(function(e,s){o(s).on("click",function(){o(n).find(".second-nav .item").removeClass("on"),o(s).addClass("on"),o(n).find(".second-selector").addClass("Hide"),o(n).find(".second-selector").eq(e).removeClass("Hide");for(var i=o(n).find(".second-nav .item").length,t=0,a=0;i>a;a++)if(o(n).find(".second-selector").eq(a).find(".sub .on").length>0){t=a;break}e!=t&&0==o(n).find(".second-selector").eq(e).find(".main .on").length&&(o(n).find(".second-selector").eq(e).find(".main .item").eq(0).addClass("on"),o(n).find(".second-selector").eq(e).find(".sub").eq(0).removeClass("Hide"))})})}})},d.prototype._showSelector=function(e){var n=this;this.ol.show(),e.removeClass(t),e.find(".menu").each(function(){o(this).hasClass(t)||n._showMenu(o(this))})},d.prototype._showMenu=function(e){e.removeClass(t),e.length&&this._iScroll(e.get(0))},d.prototype._iScroll=function(e){if(e._iscroll_)e._iscroll_.refresh();else{e._iscroll_=new a(e,{mouseWheel:!0,click:!0,scrollbars:!0});var n=o(e).find(".on");n.length&&e._iscroll_.scrollToElement(n.get(0),0)}},d.prototype._initOverlay=function(){var e=this.ol=new i,n=this;e.on("hide",function(){n.selectors.addClass(t),n.triggers.removeClass("on")})},d.prototype._openSelector=function(e){this.selectors.addClass(t),this._showSelector(this.selectors.eq(e)),this.triggers.removeClass("on"),this.triggers.eq(e).addClass("on")},d.prototype.open=function(e){var n=this;this.selectors.each(function(s,i){o(i).find(".main .item").each(function(a,d){d.innerHTML==e&&(n._openSelector(s),o(i).find(".main .item").removeClass("on"),o(i).find(".sub").addClass(t),o(d).addClass("on"),n._showMenu(o(d._subItem_)))})})},s.exports=d},{main:!0,map:t})}();

!function(){var t="env@~0.1.1",i="logger@~0.1.6",e="huatuo@1.0.6/index.js",n={},o=n;define(e,[t,i],function(t,i,e,n,o){var s=t("env"),r=s.platform,p=s.system,a="//webcatdot.dianping.com/web-broker-service/api/speed",u=(window,t("logger").Cat),m=new u({appname:e.k,filename:n}),h={ios:2,android:1},d={weixin:1,dp:2,qq:4,milife:5,wlt:3},l=h[p.name]||0,v=d[r.name]||0,g=!1,f=window.performance||{};f.timing||(f.timing=f.timing||{},f.timing.navigationStart=f.timing.navigationStart||0,f.timing.loadEventEnd=f.timing.loadEventEnd||0,f.timing.domContentLoadedEventEnd=f.timing.domContentLoadedEventEnd||window._huatuo_dom_ready_point||0);var c=function(t,i,e){var n=this;t||console.log("empty pageId"),window._huatuo||(window._huatuo={}),this.pageId=t||!1,this.autoReport=i&&!0,this.timepoints=[],this.timepoints[0]=0,this.submitParams=[],this.autoReport&&n.doReport(n.reportTiming,function(){return f.timing.domContentLoadedEventEnd*f.timing.loadEventEnd===0})};c.prototype.reportTiming=function(t,i){var e=this,n=f.timing;e.timepoints[1]=n.unloadEventStart,e.timepoints[2]=n.unloadEventEnd,e.timepoints[3]=n.redirectStart,e.timepoints[4]=n.redirectEnd,e.timepoints[5]=n.fetchStart,e.timepoints[6]=n.domainLookupStart,e.timepoints[7]=n.domainLookupEnd,e.timepoints[8]=n.connectStart,e.timepoints[9]=n.connectEnd,e.timepoints[10]=n.requestStart,e.timepoints[11]=n.responseStart,e.timepoints[12]=n.responseEnd,e.timepoints[13]=n.domLoading,e.timepoints[14]=n.domInteractive,e.timepoints[15]=n.domContentLoadedEventStart,e.timepoints[16]=n.domContentLoadedEventEnd,e.timepoints[17]=n.domComplete,e.timepoints[18]=n.loadEventStart,e.timepoints[19]=n.loadEventEnd;for(var o=1;o<e.timepoints.length;++o){var s=e.timepoints[o]||0;s=Math.max(0,s-i),s>1e5&&(g=!0),t.push(o+"-"+s)}g&&m.warn("数值点异常大",{param:{timepoints:e.timepoints,start:i,submitParams:t}})},c.prototype.doReport=function(){var t=this;t.push.apply(t,arguments),t.publish()},c.prototype.pusherList=[],c.prototype.push=function(){var t=new b(this);t.push.apply(t,arguments),this.pusherList.push(t)},c.prototype._lastPushReady=!1,c.prototype._publishLock=!1,c.prototype.publish=function(){var t=this,i=new y(this,t.pusherList);t.pageId&&i.publish()};var y=function(t,i){this.pointer=t,this.pusherList=i};y.prototype.pusherList=[],y.prototype._published=!1,y.prototype.stopPublish=!1,y.prototype._tryCount=0,y.prototype._tryLimit=300,y.prototype.publish=function(){var t=this;if(!t._published){t._published=!0;var i=setInterval(function(){for(var e=!0,n={},o=[],s=0;s<t.pusherList.length;s++)if(!t.pusherList[s].isPublished&&(t.pusherList[s].lastPushReady||(e=!1),t.pusherList[s].submitParams.length>0&&!t.pusherList[s].isPublished))for(var r=0;r<t.pusherList[s].submitParams.length;r++)n[t.pusherList[s].submitParams[r]]=t.pusherList[s].submitParams[r];if(e){clearInterval(i);for(var s=0;s<t.pusherList.length;s++)t.pusherList[s].lastPushReady&&(t.pusherList[s].isPublished=!0);for(var p in n)o.push(p);if(!o.length)return;var u="w="+t.pointer.pageId+"&v=2&source="+v+"&p="+l+"&speedparams="+encodeURIComponent(o.join("	")),m=a+"?"+u,h=new Image;h.src=m}else if(t._tryCount++,t._tryCount>t._tryLimit){for(var s=0;s<t.pusherList.length;s++)t.pusherList[s].stopPush=!0;clearInterval(i)}},100)}};var b=function(t){this.pointer=t};b.prototype.lastPushReady=!1,b.prototype.isPublished=!1,b.prototype.submitParams=[],b.prototype.stopPush=!1,b.prototype.push=function(t,i,e){var n=this,o="function"==typeof i?i:e;o=o||function(){return!1},n.lastPushReady=!1,n.submitParams=[];var s=setInterval(function(){if(n.stopPush)return void clearInterval(s);if(0===f.timing.navigationStart||o())return void(n.lastPushReady=!1);n.lastPushReady=!0;var e=f.timing.navigationStart;if(t)"function"==typeof t?t.call(n.pointer,n.submitParams,e):"number"==typeof t&&"number"==typeof i&&n.submitParams.push(t+"-"+i);else{for(var r=1;r<n.pointer.timepoints.length;++r){var p=n.pointer.timepoints[r]||0;p=Math.max(0,p-e),n.submitParams.push(r+"-"+p)}n.pointer.timepoints.length=0}return void clearInterval(s)},20)},e.exports=c},{main:!0,map:o})}();
//# sourceMappingURL=huatuo.js.map

!function(){var t="xss@~0.1.0",s="zepto@^1.2.1",i="mobile-common-search@1.2.6/index.js",e={},o=e;define(i,[t,s],function(t,s,i,e,o){var r=t("xss"),n=function(t,s){for(var i in s)s.hasOwnProperty(i)&&(t[i]=s[i]);return t},a=function(t,s){return"function"==typeof t&&(t=t(s)),t.replace(/{([^{}]*)}/g,function(t,i){return i in s?s[i]:""})},h=function(){var t=window.localStorage&&null!=window.localStorage,s="local_test";if(t)try{localStorage.setItem(s,1),localStorage.removeItem(s)}catch(i){return!1}return t},c=t("zepto"),l='<div class="J_search_container search_container" style="display:none ;"> <form class="J_form" method="post">  <div class="head_cnt"> <div class="head_cnt_input"> <input type="text" name="keyword" class="search J_search_input" autocomplete="off"><i class="clear" data-role="clear"></i> <input type="submit"> </div> <a class="cancel J_cancel" href="javascript:;">取消</a> </div>  <div class="J_key_list key_list Fix"> </div> <div class="J_history_list key_list Fix"> <div class="J_history_title">搜索记录</div> <div class="history_list"></div> </div> <a class="J_history_clear link-btn" href="javascript:;">清除搜索记录</a> <ul class="J_suggest_list suggest_list"> </ul> </form> </div>',u=function(t,s){t=t||{},this.trigger=c(t.trigger),this.trigger.length&&(this.searchContainer=s=c(s||l),this.searchContainer.appendTo(document.body),this.options=n({showKeywordAndHistory:!1,triggerEvent:"focus",suggestPostKey:"keyword",suggestEncode:!1,suggestUrl:"",suggestItemTemplate:'<li><a href="javascript:;">{keyword}<span class="number">约{num}个结果</span></a></li>',getSuggestList:function(t){return t.message.result},suggestOnclick:function(t){this.search(t.keyword)},localStorageKey:"searchstorage",historyItemTemplate:'<a href="javascript:void(0)" data-id="{index}">{keyword}</a>',historyOnclick:function(t,s){this.search(t)},historyLength:20,method:"post",ajaxType:"json",onHistoryShow:function(){},onKeywordShow:function(){},clearHistoryHandler:function(){},searchOnClick:function(){},hideHandler:function(){},validate:function(t){return!0}},t),this.searchInput=s.find(".J_search_input"),this.form=s.find(".J_form"),this.cancelBtn=s.find(".J_cancel"),this.keyList=s.find(".J_key_list"),this.JhistoryList=s.find(".J_history_list"),this.historyList=s.find(".history_list"),this.suggestList=s.find(".J_suggest_list"),this.historyClearBtn=s.find(".J_history_clear"),this.clear=s.find(".clear"),this.currentKey=this.searchInput.val()||"",this.currentSuggestId=0,this._initEvent())};u.prototype._initEvent=function(){var t=this;this.clear.on("click",function(){t.searchInput.val(""),c(this).css("display","none")}),t.searchInput.on("input",function(s){c(this).val().length?t.clear.css("display","block"):t.clear.css("display","none")}),this.cancelBtn.on("click",function(){t.hide(),t.options.hideHandler()}),this.searchInput.on("focus",function(){t.timer=setInterval(function(){t.suggest()},500)}),this.searchInput.on("blur",function(){clearInterval(t.timer)}),this.form.on("submit",function(s){var i=t.searchInput.val().trim();return t.options.validate(i)?void t.addHistory(i):void s.preventDefault()}),this.historyClearBtn.on("click",function(){t.clearHistory(),t.JhistoryList.hide()}),this.trigger.length&&this.trigger.on(this.options.triggerEvent||"focus",function(s){s.preventDefault(),t.display()})},u.prototype.display=function(){this.show(),this.searchInput.get(0).focus(),this.options.showKeywordAndHistory?this.showKeywordAndHistory():this.showKeywordOrHistory()},u.prototype.show=function(){window.scrollTo(0,0),this.searchContainer.css({top:0,height:c(document).height()}).show()},u.prototype.hide=function(){var t=this.searchContainer;t.animate({top:"100%"},300,"ease-out",function(){t.hide()})},u.prototype.showHistory=function(){if(h()){var t=this.options,s=this,i=this._historyParse();s.historyList.empty().show(),i.length?s.historyClearBtn.show():s.historyClearBtn.hide(),i.forEach(function(i,e){c(a(t.historyItemTemplate,{keyword:i})).prependTo(s.historyList).on("click",function(){t.historyOnclick.call(s,i,e)})}),this.JhistoryList.add(this.historyClearBtn).css("display","block")}},u.prototype.addHistory=function(t){if(t){var s=this._historyParse(),i=s.indexOf(t);-1!==i&&s.splice(i,1),s.push(r(t)),this._historyStringify(s)}},u.prototype.clearHistory=function(){h()&&localStorage.setItem(this.options.localStorageKey,""),this.historyList.empty(),this.historyClearBtn.hide(),this.options.clearHistoryHandler()},u.prototype._historyParse=function(){if(h()){var t=localStorage.getItem(this.options.localStorageKey);return t?t.split(",").reverse().slice(0,this.options.historyLength).reverse():[]}return[]},u.prototype._historyStringify=function(t){if(h()){var s=t.reverse().slice(0,this.options.historyLength).reverse();localStorage.setItem(this.options.localStorageKey,s.join(","))}},u.prototype.suggest=function(){var t=this.searchInput,s=t.val().trim(),i={},e=this,o=e.options;i[o.suggestPostKey]=o.suggestEncode?encodeURIComponent(s):s;var r=++this.currentSuggestId;return""===s?(e.suggestList.hide(),void(this.currentKey="")):(e.keyList.hide(),e.historyList.hide(),e.historyClearBtn.hide(),e.suggestList.show(),void(s!==this.currentKey&&(this.currentKey=s,e.suggestList.empty(),o.suggestUrl&&c.ajax({url:o.suggestUrl,data:i,dataType:o.ajaxType,type:o.method,success:function(t){if(r===e.currentSuggestId&&200===t.code){var s=o.getSuggestList(t)||[];s.forEach(function(t,s){c(a(o.suggestItemTemplate,t)).appendTo(e.suggestList).on("click",function(){o.suggestOnclick.call(e,t,s,c(this))})})}}}))))},u.prototype.showKeywordOrHistory=function(){var t=this;t.keyList.length&&t.keyList.children().length?(t.keyList.show(),t.historyClearBtn.hide(),t.options.onKeywordShow()):(t.keyList.hide(),t.showHistory(),t.options.onHistoryShow())},u.prototype.showKeywordAndHistory=function(){this.keyList.show(),this.options.onKeywordShow();var t=localStorage.getItem(this.options.localStorageKey);t&&(this.showHistory(),this.options.onHistoryShow())},u.prototype.search=function(t){this.options.validate(t)&&(this.searchInput.val(t),this.addHistory(t),this.options.searchOnClick(),this.form.get(0).submit())},i.exports=u},{main:!0,map:o})}();
//# sourceMappingURL=mobile-common-search.js.map