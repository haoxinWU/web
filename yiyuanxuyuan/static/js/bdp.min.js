(function(c,u,p){var a=function(){};var j="//openapi.baidu.com/cloudaapi/lightapp.js";var e=(function(x){var v={android:/(Android);?\s+([\d.]+)?/.test(x),ios:/(iPhone|iPod|iPad)/.test(x),box:x.match(/baiduboxapp\/([\d.-_]*)/i),wallet:/baiduwallet/ig.test(x)};if(v.box){var w=v.box[1];if(w.match(/[0-9]\.[^_]*/)){w=w.match(/[0-9]\.[^_]*/)[0]}w=(v.ios)?w.split(".").reverse().join("."):w;v.box=w}return v})(p);var h=(function(v){var w=v.box;if(w){w=(k(w,"5.3")===1)}return{wallet:v.wallet,box:w,cloud:v.wallet||w}})(e);var t={loadScript:i,versionCompare:k,setConfig:r,addRule:b,safe:f,login:l,pay:g,share:o,os:e,config:{scriptLoaded:false}};function f(x,w,z){var y=n(x);if(y==="string"){z=w;w=x;x=null}if(y==="function"){z=x;x=w=null}if(n(w)==="function"){z=w;w=null}z=z||a;var v=h[w||"cloud"];if(typeof v==="undefined"){console.warn('[Warning] Platform "',w,'" does not exist,','use the default value "cloud".');v=h.cloud}if(v){x&&x.preventDefault();z.call(this,x)}return v}function r(x){var w;var z;var y;var v={};if(n(x)!=="object"){if(n(x)==="string"){v[x]=arguments[1]}}else{v=x}for(w in v){z=v[w];y=t.config[w];if(y&&n(y)==="object"){d(y,z)}else{t.config[w]=z}}return t}function l(w,v){return this.safe(w,q(function(){if(this.config.islogin){return}var z=this.config.login;v=v||c.location.href;if(!/^\/\/.|:\//.test(v)){v=c.location.origin+((v.indexOf("/")===0)?v:"/"+v)}var x=new s;x.show();Blend.lightInit({module:["app","account"]});var y={tpl:"bp",u:v,onsuccess:function(){c.location.href=v},onfail:function(){x.hide()}};y.redirect_uri=v;if(z){y=d(y,z)}Blend.mbaas.account.bdLogin(y)}))}function g(w,v){return this.safe(w,v||null,q(function(){var y=this.config.pay;if(!this.config.ak){console.warn('\n[Warning] Parameters "ak" is missing, payment will fail!\n','Please use BDP.setConfig( "ak", "Your app key" ) set.')}if(!y||!y.params){console.warn('\n[Warning] Parameters "pay.params" is missing, payment will fail, so BDP stop it!\n','Please use BDP.setConfig( "pay", { ... params: "Your payment parameter string." ... } ) set.',"And try it again. Good luck!");return}if(y.onBefore){y.onBefore.call(this)}var x={onsuccess:a,onfail:a,showdDialog:true,orderInfo:m(y.params||{})};x=d(x,y,["params","onBefore"]);clouda.lightInit({ak:this.config.ak||"",module:["pay"]});clouda.mbaas.pay.doPay(x)}))}function q(w){var v=t;return function(){if(!v.config.scriptLoaded&&!c.clouda){var x=d({name:"baidu-tc-cerfication"},v.config.script||{});i(j,function(){setTimeout(function(){w.call(v.setConfig("scriptLoaded",true))},1)},x);return}w.call(v.setConfig("scriptLoaded",true))}}function i(v,B,y){var z=u.createElement("script");var x=u.head;var A={complete:1,loaded:1,undefined:1};z.onload=z.onerror=z.onreadystatechange=function(){if(A[z.readyState]){if(B){B()}z.onload=z.onerror=z.onreadystatechange=null;z=null}};if(y&&n(y)==="object"){for(var w in y){z.setAttribute(w,y[w])}}z.src=v;x.insertBefore(z,x.firstChild)}function b(w,x){var v=(n(x)==="function")?x():x;h[w]=v;h.cloud=h.cloud||v}function o(){var z=t.config.share;if(!z||!z.content){(!z.content)&&console.warn('\n[Warning] Parameters "share.content" is missing, share will fail, so BDP stop it!\n','Please use BDP.setConfig( "share", { ... content: "Your share content." ... } ) set.',"And try it again. Good luck!");return t}if(!t.config.ak){console.warn('\n[Warning] Parameters "ak" if missing, will not be able to generate a short url!\n','Please use BDP.setConfig( "ak", "Your app key" ) set.')}var y={envWap:true,envLightapp:true,success:a,error:a,type:"url",mediaType:"all"};z=d(y,z);var w=t.safe();var x={mediaType:z.mediaType,title:z.title,linkUrl:z.linkUrl,content:z.content,type:z.type,imageUrl:z.imageUrl};if(w){var v="BDP_share_success_callBack";var A="BDP_share_fail_callBack";c[v]=z.success;c[A]=z.error;c.BoxShareData={successcallback:v,errorcallback:A,options:(function(){var B=d({iconUrl:z.imageUrl},x);if((t.os.android&&t.os.box&&t.versionCompare(t.os.box,"6.5"))){delete B.imageUrl}return B})()}}if((w&&!z.envLightapp)||(!w&&!z.envWap)){return t}q(function(){x=d({onsuccess:z.success,onfail:z.error},x);var B=u.createElement("style");B.type="text/css";B.innerHTML=".bd-share-pop-content{top: auto !important;bottom: 0 !important;}";u.head.appendChild(B);Blend.lightInit({ak:t.config.ak||"",module:["socialshare"]},function(){z.onload&&z.onload(function(){Blend.mbaas.socialshare.callShare(x)});(z.$id)&&u.getElementById(z.$id).addEventListener("click",function(){var E="";try{E=socShare.ui.data.time}catch(D){}var C=u.getElementById("bd_share_popup_"+E);if(C){C.style.display=""}else{Blend.mbaas.socialshare.callShare(x)}},false)})})();return t}function k(A,z){if(A===z){return 0}A=A.split(".");z=z.split(".");var y=Math.max(A.length,z.length);var x=0;var w;var v;for(;x<y;x++){w=parseInt(A[x]||0);v=parseInt(z[x]||0);if(w>v){return 1}if(w<v){return -1}}return 0}function n(v){return Object.prototype.toString.call(v).replace(/\[\object|\]|\s/gi,"").toLowerCase()}function m(y){if(typeof y==="string"){return y}var v=[];var x;var w;for(x in y){w=y[x];v.push([x,encodeURIComponent(w)].join("="))}return v.join("&")}function d(v,y,x){var w=x&&Array.isArray(x);for(var z in y){if(!(w&&!!~x.indexOf(z))){v[z]=y[z]}}return v}function s(){if(s.instance){return s.instance}else{s.instance=this}this.$element=(function(){var v=u.createElement("div");v.style.cssText=";width:100%;height:100%;display:none;text-align:center;color:#fff;font-weight:blod;font-size:16px;position:fixed;top:0;left:0;background:rgba(0,0,0,.3);z-index:999";v.innerHTML='<div style="margin-top: 50%"><img width="50" src="https://1.baidu.com/static/one_wap/images/loading2.gif"></div>';v.ontouchmove=function(){return false};u.body.appendChild(v);return v})();this.show=function(){this.$element.style.display="";return this};this.hide=function(){this.$element.style.display="none";return this}}c.BDP=t})(window,document,navigator.userAgent);